{"version":3,"sources":["PrivateRoute.js","backend.service.js","MyMenu.jsx","HomePage.jsx","LoginPage.jsx","AdminPage.jsx","InfoPage.jsx","ResultPage.jsx","App.js","index.js"],"names":["PrivateRoute","Component","component","rest","render","props","localStorage","getItem","to","pathname","state","from","location","teams","split","forEach","item","getSortedMatches","matches","sort","a","b","matchNo","getAllData","backendService","getAll","users","sortedMatches","allDataNotFiltred","map","match","index","allDataRows","home","away","passed","coefficient","usersStakes","enable","user","allDataRow","userId","_id","username","stakes","push","allData","filter","data","console","log","zeroingMoney","stake","setMoneyByUserId","money","getStandartMatchPrice","coefSum","Math","round","length","calcMoney","standartMatchPrice","payments","matchPrice","unrealezedPrize","vinners","calcPets","vin","authHeader","JSON","parse","authdata","Authorization","logout","removeItem","handleResponse","response","json","ok","status","window","reload","Promise","reject","message","statusText","request","url","method","requestOptions","fetch","headers","requestObj","get","post","put","delete","login","password","body","stringify","btoa","setItem","updateOne","type","obj","addOne","deleteOne","id","getStakesByUserId","setStakesByUserId","realHome","realAway","difference","realDifference","MyMenu","useState","anchorEl","setAnchorEl","handleClose","Button","aria-controls","aria-haspopup","onClick","event","currentTarget","Menu","keepMounted","open","Boolean","onClose","MenuItem","currentUser","isAdmin","HomePage","setCurrentUser","loading","setStakes","setMatches","columns","title","field","hidden","editable","defaultSort","lookup","useEffect","then","stakesArr","matchesArr","CircularProgress","options","pageSize","pageSizeOptions","sorting","rowStyle","rowData","pets","backgroundColor","find","undefined","temp","Object","assign","detailPanel","homeName","awayName","isEditable","onRowUpdate","newData","oldData","updatedStake","st","crypto","require","LoginPage","error","submitted","showPassword","setState","handleChange","e","target","name","value","Grid","container","Typography","variant","gutterBottom","FormControl","InputLabel","htmlFor","Input","className","onChange","Alert","severity","AlertTitle","endAdornment","InputAdornment","position","IconButton","sp","onMouseDown","preventDefault","Visibility","VisibilityOff","disabled","createHash","update","digest","history","AdminPage","newUser","setNewUser","setUsers","answer","setAnswer","clean","passwordChanged","handleChangeField","checked","handleMouseDownPassword","key","TextField","label","defaultValue","firstName","lastName","email","Checkbox","defaultChecked","color","foundUser","handleSaveUser","startIcon","Save","ans","Delete","Fab","aria-label","concat","Add","CloudUpload","InfoPage","onRowAdd","onRowDelete","slice","ResultPage","setColumns","setData","onlyMatches","add","style","i","realMatch","visability","App","exact","path","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.22d8a90a.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\nexport const PrivateRoute = ({ component: Component, ...rest }) => (\r\n  <Route\r\n    {...rest}\r\n    render={(props) =>\r\n      localStorage.getItem(\"user\") ? (\r\n        <Component {...props} />\r\n      ) : (\r\n        <Redirect\r\n          to={{ pathname: \"/login\", state: { from: props.location } }}\r\n        />\r\n      )\r\n    }\r\n  />\r\n);\r\n","//const localBackendHost = \"http://localhost:4000\";\r\nconst cloudBackendHost = \"https://node-euro-2021.ew.r.appspot.com\";\r\nlet teams = {};\r\n//\"Бельгия,Италия,Россия,Финляндия,Франция,Польша,Украина,Испания,Турция,Англия,Чехия,Швеция,Нидерланды,Германия,Хорватия,Австрия,Португалия,Швейцария,Дания,Уэльс\"\r\n\"Турция,Италия,Уэльс,Швейцария,Дания,Финляндия,Бельгия,Россия,Нидерланды,Украина,Австрия,Северная Македония,Англия,Хорватия,Шотландия,Чехия,Испания,Швеция,Польша,Словакия,Венгрия,Португалия,Франция,Германия\"\r\n  .split(\",\")\r\n  .forEach((item) => (teams = { ...teams, [item]: item }));\r\n\r\nconst backendHost = cloudBackendHost;\r\n\r\nconst calcPets = (home, away, realHome, realAway) => {\r\n  if (\r\n    home === null ||\r\n    away === null ||\r\n    realHome === null ||\r\n    realAway === null\r\n  ) {\r\n    return 0;\r\n  }\r\n  const difference = home - away;\r\n  const realDifference = realHome - realAway;\r\n  switch (true) {\r\n    case home === realHome && away === realAway:\r\n      return 5;\r\n    case difference === realDifference:\r\n      return 3;\r\n    case (difference > 0 && realDifference > 0) ||\r\n      (difference < 0 && realDifference < 0) ||\r\n      (difference === 0 && realDifference === 0):\r\n      return 1;\r\n    default:\r\n      return 0;\r\n  }\r\n};\r\n\r\nconst getSortedMatches = (matches) => {\r\n  const sortedMatches = matches.sort((a, b) => {\r\n    return a.matchNo - b.matchNo;\r\n  });\r\n  return sortedMatches;\r\n};\r\n\r\nconst getAllData = async () => {\r\n  const users = await backendService.getAll(\"users\");\r\n  const matches = await backendService.getAll(\"matches\");\r\n  const sortedMatches = getSortedMatches(matches);\r\n  const allDataNotFiltred = sortedMatches.map((match, index) => {\r\n    let allDataRows = {\r\n      matchNo: match.matchNo,\r\n      home: match.home,\r\n      away: match.away,\r\n      passed: false,\r\n      coefficient: match.coefficient,\r\n      usersStakes: [],\r\n    };\r\n    if (!match.enable) {\r\n      allDataRows.passed = true;\r\n      users.forEach((user) => {\r\n        let allDataRow = {};\r\n        allDataRow.userId = user._id;\r\n        allDataRow.username = user.username; //убрать потом\r\n        if (\r\n          user.stakes[index].home == null ||\r\n          user.stakes[index].away == null\r\n        ) {\r\n          //сделал ли пользователь ставку в закрытой области\r\n          allDataRow.home = 10;\r\n          allDataRow.away = 10;\r\n        } else {\r\n          allDataRow.home = user.stakes[index].home;\r\n          allDataRow.away = user.stakes[index].away;\r\n        }\r\n        allDataRows.usersStakes.push(allDataRow);\r\n      });\r\n    }\r\n    return allDataRows;\r\n  });\r\n  const allData = allDataNotFiltred.filter((data) => data.passed === true);\r\n  console.log(allData);\r\n  return allData;\r\n};\r\n\r\nconst zeroingMoney = async () => {\r\n  const users = await backendService.getAll(\"users\");\r\n  users.forEach((user) => {\r\n    user.stakes.forEach((stake) => {\r\n      backendService.setMoneyByUserId(user._id, {\r\n        matchNo: stake.matchNo,\r\n        money: 0,\r\n      });\r\n    });\r\n  });\r\n  return \"done\";\r\n};\r\n\r\nconst getStandartMatchPrice = async () => {\r\n  const users = await backendService.getAll(\"users\");\r\n  const matches = await backendService.getAll(\"matches\");\r\n  const contribution = 500;\r\n  let coefSum = 0;\r\n  matches.forEach((match) => {\r\n    coefSum += match.coefficient;\r\n  });\r\n  return Math.round((contribution * users.length) / coefSum);\r\n};\r\n\r\nconst calcMoney = async () => {\r\n  const allData = await getAllData();\r\n  const standartMatchPrice = await getStandartMatchPrice();\r\n  let payments = [];\r\n  let matchPrice = standartMatchPrice;\r\n  let unrealezedPrize = 0;\r\n  allData.forEach((match) => {\r\n    //для каждого матча\r\n    let vinners = [];\r\n    match.usersStakes.forEach((stake) => {\r\n      //для каждой ставки считаем победителей\r\n      if (\r\n        backendService.calcPets(\r\n          stake.home,\r\n          stake.away,\r\n          match.home,\r\n          match.away\r\n        ) === 5\r\n      ) {\r\n        vinners.push({ userId: stake.userId });\r\n        console.log(stake.username + \" \" + match.matchNo + \"  \" + vinners);\r\n      }\r\n    });\r\n    if (vinners.length === 0) {\r\n      unrealezedPrize = unrealezedPrize + standartMatchPrice;\r\n      matchPrice = 0;\r\n    } else {\r\n      matchPrice = standartMatchPrice + unrealezedPrize;\r\n      unrealezedPrize = 0;\r\n    }\r\n    let money =\r\n      vinners.length > 0\r\n        ? (match.coefficient * matchPrice) / vinners.length\r\n        : 0;\r\n    payments.push({ matchNo: match.matchNo, vinners: vinners, money: money });\r\n  });\r\n  payments.forEach((match) => {\r\n    //не обнуляет если не победитель\r\n    match.vinners.forEach((vin) => {\r\n      backendService.setMoneyByUserId(vin.userId, {\r\n        matchNo: match.matchNo,\r\n        money: match.money,\r\n      });\r\n    });\r\n  });\r\n  console.log(payments);\r\n  return \"done\";\r\n};\r\n\r\nconst authHeader = () => {\r\n  // return authorization header with basic auth credentials\r\n  const user = JSON.parse(localStorage.getItem(\"user\"));\r\n  return user && user.authdata\r\n    ? {\r\n        Authorization: \"Basic \" + user.authdata,\r\n        \"Content-Type\": \"application/json\",\r\n      }\r\n    : {};\r\n};\r\n\r\nconst logout = () => localStorage.removeItem(\"user\");\r\n\r\nconst handleResponse = async (response) => {\r\n  const data = await response.json();\r\n  //const data = text && JSON.parse(text)\r\n  if (!response.ok) {\r\n    if (response.status === 401) {\r\n      // auto logout if 401 response returned from api\r\n      logout();\r\n      window.location.reload(true); //добавил window\r\n    }\r\n    return Promise.reject((data && data.message) || response.statusText);\r\n  }\r\n  return data;\r\n};\r\n\r\nconst request = async (url, method, requestOptions) =>\r\n  await handleResponse(\r\n    await fetch(`${backendHost}/${url}`, {\r\n      method: method,\r\n      headers: authHeader(),\r\n      ...(requestOptions ? requestOptions : {}),\r\n    })\r\n  );\r\n\r\nconst requestObj = {\r\n  get: async (url, requestOptions) => await request(url, \"GET\", requestOptions),\r\n  post: async (url, requestOptions) =>\r\n    await request(url, \"POST\", requestOptions),\r\n  put: async (url, requestOptions) => await request(url, \"PUT\", requestOptions),\r\n  delete: async (url, requestOptions) =>\r\n    await request(url, \"DELETE\", requestOptions),\r\n};\r\n\r\n// let requestObj = {};\r\n// \"GET,POST,PUT,DELETE\".split(\",\").forEach(\r\n//   (item) =>\r\n//     (requestObj = {\r\n//       ...requestObj,\r\n//       [item.toLowerCase()]: async (url, requestOptions) =>\r\n//         await request(url, item, requestOptions),\r\n//     })\r\n// );\r\n\r\nexport const backendService = {\r\n  login: async (username, password) => {\r\n    const user = await requestObj.post(`users/authenticate`, {\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({ username, password }),\r\n    });\r\n    if (user) {\r\n      user.authdata = window.btoa(username + \":\" + password);\r\n      localStorage.setItem(\"user\", JSON.stringify(user));\r\n    }\r\n    return user;\r\n  },\r\n  logout: logout,\r\n  updateOne: async (type, obj) =>\r\n    await requestObj.put(`${type}/${obj._id}`, {\r\n      body: JSON.stringify({ ...obj }),\r\n    }),\r\n  addOne: async (type, obj) =>\r\n    await requestObj.post(type, { body: JSON.stringify({ ...obj }) }),\r\n  deleteOne: async (type, id) => requestObj.delete(`${type}/${id}`),\r\n  getAll: async (type) => await requestObj.get(type),\r\n  getStakesByUserId: async (id) => await requestObj.get(`users/${id}/stakes`),\r\n  setStakesByUserId: async (id, stake) =>\r\n    await requestObj.put(`users/${id}/stakes/${stake.matchNo}`, {\r\n      body: JSON.stringify({ ...stake }),\r\n    }),\r\n  setMoneyByUserId: async (id, stake) =>\r\n    await requestObj.put(`users/${id}/money/${stake.matchNo}`, {\r\n      body: JSON.stringify({ ...stake }),\r\n    }),\r\n  teams,\r\n  calcPets,\r\n  calcMoney,\r\n  zeroingMoney,\r\n  getSortedMatches,\r\n};\r\n\r\n//   const allData = users.flatMap(user => {\r\n//     let allDataRows =[];\r\n//     sortedMatches.forEach((match, index) => {\r\n//       let allDataRow;\r\n//       if ((match.matchNo === user.stakes[index].matchNo) && !match.enable){\r\n//         allDataRow = user.stakes[index];\r\n//         allDataRow.userId = user._id;\r\n//         if (user.stakes[index].home == null || user.stakes[index].away == null){ //сделал ли пользователь ставку в закрытой области\r\n//           // user.stakes[index].home = 10;\r\n//           // user.stakes[index].away = 10;\r\n//           allDataRow.home = 10;\r\n//           allDataRow.away = 10;\r\n//         }\r\n//         else{\r\n//           // user.stakes[index].realHome = match.home;\r\n//           // user.stakes[index].realAway = match.away;\r\n//           allDataRow.realHome = match.home;\r\n//           allDataRow.realAway = match.away;\r\n//         }\r\n//         //user.stakes[index].passed = true;\r\n//         allDataRow.password =true;\r\n//         allDataRows.push(allDataRow);\r\n//         //console.log(index +\" \"+user.username +\" \"+match.matchNo+\" \"+match.home+\" \"+match.away+\" \"+user.stakes[index].home+\" \"+user.stakes[index].away)\r\n//       }\r\n//      })\r\n//     return allDataRows;\r\n//    })\r\n//    return allData;\r\n// };\r\n\r\n// const localBackendHost = \"http://localhost:4000\";\r\n// const cloudBackendHost = \"http://node-euro-2021.appspot.com\";\r\n// const teams = {\r\n//   Бельгия: \"Бельгия\",\r\n//   Италия: \"Италия\",\r\n//   Россия: \"Россия\",\r\n//   Финляндия: \"Финляндия\",\r\n//   Франция: \"Франция\",\r\n//   Польша: \"Польша\",\r\n//   Украина: \"Украина\",\r\n//   Испания: \"Испания\",\r\n//   Турция: \"Турция\",\r\n//   Англия: \"Англия\",\r\n//   Чехия: \"Чехия\",\r\n//   Швеция: \"Швеция\",\r\n//   Нидерланды: \"Нидерланды\",\r\n//   Германия: \"Германия\",\r\n//   Хорватия: \"Хорватия\",\r\n//   Австрия: \"Австрия\",\r\n//   Португалия: \"Португалия\",\r\n//   Швейцария: \"Швейцария\",\r\n//   Дания: \"Дания\",\r\n//   Уэльс: \"Уэльс\",\r\n// };\r\n\r\n// const backendHost = localBackendHost;\r\n\r\n// const calcPets = ( home, away, realHome, realAway) => {\r\n//   if(home===null || away === null || realHome ===null || realAway === null) return 0;\r\n//   let difference = home - away;\r\n//   let realDifference = realHome - realAway;\r\n//   if (home === realHome && away === realAway) {\r\n//     return 5;\r\n//   } else if (difference === realDifference) {\r\n//     return 3;\r\n//   } else if (\r\n//     (difference > 0 && realDifference > 0) ||\r\n//     (difference < 0 && realDifference < 0) ||\r\n//     (difference === 0 && realDifference === 0)\r\n//   ) {\r\n//     return 1;\r\n//   } else return 0;\r\n// }\r\n\r\n// const authHeader = () => {\r\n//   // return authorization header with basic auth credentials\r\n//   let user = JSON.parse(localStorage.getItem(\"user\"));\r\n\r\n//   if (user && user.authdata) {\r\n//     return {\r\n//       Authorization: \"Basic \" + user.authdata,\r\n//       \"Content-Type\": \"application/json\",\r\n//     };\r\n//   } else {\r\n//     return {};\r\n//   }\r\n// }\r\n\r\n//  const login = async (username, password) => {\r\n//   const requestOptions = {\r\n//     method: \"POST\",\r\n//     headers: { \"Content-Type\": \"application/json\" },\r\n//     body: JSON.stringify({ username, password }),\r\n//   };\r\n\r\n//   const response = await fetch(`${backendHost}/users/authenticate`, requestOptions);\r\n//   const user = await handleResponse(response);\r\n//   // login successful if there's a user in the response\r\n//   if (user) {\r\n//     // store user details and basic auth credentials in local storage\r\n//     // to keep user logged in between page refreshes\r\n//     user.authdata = window.btoa(username + \":\" + password);\r\n//     localStorage.setItem(\"user\", JSON.stringify(user));\r\n//   }\r\n//   return user;\r\n// }\r\n\r\n// const logout= ()=>{\r\n//   // remove user from local storage to log user out\r\n//   localStorage.removeItem(\"user\");\r\n// }\r\n\r\n//  const getAll = async (type) => {\r\n//   const requestOptions = {\r\n//     method: \"GET\",\r\n//     headers: authHeader(),\r\n//   };\r\n\r\n//   const response = await fetch(`${backendHost}/${type}`, requestOptions);\r\n//   return handleResponse(response);\r\n// }\r\n\r\n//  const addOne = async (type, obj) => {\r\n//   const requestOptions = {\r\n//     method: \"POST\",\r\n//     headers: authHeader(),\r\n//     body: JSON.stringify({...obj}),\r\n//   };\r\n\r\n//   const response = await fetch(`${backendHost}/${type}/`, requestOptions);\r\n//   return handleResponse(response);\r\n// }\r\n\r\n// const updateOne = async (type, obj) => {\r\n//   const requestOptions = {\r\n//     method: \"PUT\",\r\n//     headers: authHeader(),\r\n//     body: JSON.stringify({...obj}),\r\n//   };\r\n\r\n//   const response = await fetch(`${backendHost}/${type}/${obj._id}`, requestOptions);\r\n//   return handleResponse(response);\r\n// }\r\n\r\n//  const deleteOne = async (type, id) => {\r\n//   const requestOptions = {\r\n//     method: \"DELETE\",\r\n//     headers: authHeader(),\r\n//   };\r\n\r\n//   const response = await fetch(`${backendHost}/${type}/${id}`, requestOptions);\r\n//   return handleResponse(response);\r\n// }\r\n\r\n// const getStakesByUserId = async (id) => {\r\n//   const requestOptions = {\r\n//     method: \"GET\",\r\n//     headers: authHeader(),\r\n//   };\r\n\r\n//   const response = await fetch(`${backendHost}/users/${id}/stakes`, requestOptions);\r\n//   return handleResponse(response);\r\n// }\r\n\r\n//  const setStakesByUserId = async (id, stake) => {\r\n//   const requestOptions = {\r\n//     method: \"PUT\",\r\n//     headers: authHeader(),\r\n//     body: JSON.stringify({...stake}),\r\n//   };\r\n\r\n//   const response = await fetch(`${backendHost}/users/${id}/stakes/${stake.matchNo}`, requestOptions);\r\n//   return handleResponse(response);\r\n// }\r\n\r\n// const handleResponse = (response) => {\r\n//   return response.text().then((text) => {\r\n//     const data = text && JSON.parse(text);\r\n//     if (!response.ok) {\r\n//       if (response.status === 401) {\r\n//         // auto logout if 401 response returned from api\r\n//         logout();\r\n//         window.location.reload(true); //добавил window\r\n//       }\r\n\r\n//       const error = (data && data.message) || response.statusText;\r\n//       return Promise.reject(error);\r\n//     }\r\n//     return data;\r\n//   });\r\n// }\r\n\r\n// export const backendService = {\r\n//   login,\r\n//   logout,\r\n//   updateOne,\r\n//   addOne,\r\n//   deleteOne,\r\n//   getAll,\r\n//   getStakesByUserId,\r\n//   setStakesByUserId,\r\n//   teams,\r\n//   calcPets\r\n// };\r\n","import React, { useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Button, Menu, MenuItem } from \"@material-ui/core\";\r\n\r\nfunction MyMenu(props) {\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n\r\n  const handleClick = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button\r\n        aria-controls=\"simple-menu\"\r\n        aria-haspopup=\"true\"\r\n        onClick={handleClick}\r\n      >\r\n        МЕНЮ\r\n      </Button>\r\n      <Menu\r\n        id=\"simple-menu\"\r\n        anchorEl={anchorEl}\r\n        keepMounted\r\n        open={Boolean(anchorEl)}\r\n        onClose={handleClose}\r\n      >\r\n        <MenuItem>\r\n          {\" \"}\r\n          <Link to=\"/\">Домашняя страница</Link>\r\n        </MenuItem>\r\n        <MenuItem onClick={handleClose}>\r\n          <Link to=\"/result\">Результаты</Link>\r\n        </MenuItem>\r\n        <MenuItem onClick={handleClose}>\r\n          <Link to=\"/info\">Информация</Link>\r\n        </MenuItem>\r\n        {props.currentUser.isAdmin && (\r\n          <MenuItem onClick={handleClose}>\r\n            <Link to=\"/admin\">Администрирование</Link>\r\n          </MenuItem>\r\n        )}\r\n        <MenuItem onClick={handleClose}>\r\n          <Link to=\"/login\">Выйти</Link>\r\n        </MenuItem>\r\n      </Menu>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport { MyMenu };\r\n","import React, { useState, useEffect } from \"react\";\r\nimport MaterialTable from \"material-table\";\r\nimport { backendService } from \"./backend.service\";\r\nimport {MyMenu} from \"./MyMenu\";\r\nimport { CircularProgress } from \"@material-ui/core\";\r\n\r\nfunction HomePage() {\r\n  const [currentUser, setCurrentUser] = useState({});\r\n  const [stakes, setStakes] = useState({ loading: true });\r\n  const [matches, setMatches] = useState({ loading: true });\r\n\r\n  const columns = [\r\n    { title: \"_id\", field: \"_id\", hidden: true },\r\n    {\r\n      title: \"№\",\r\n      field: \"matchNo\",\r\n      editable: \"never\",\r\n      //      customSort: (a, b) =>( a.matchNo - b.matchNo ),\r\n      defaultSort: \"asc\",\r\n    },\r\n    {\r\n      title: \"Home\",\r\n      field: \"homeName\",\r\n      lookup: backendService.teams,\r\n      editable: \"never\",\r\n    },\r\n    { title: \"Score\", field: \"home\", type: \"numeric\" },\r\n    {\r\n      title: \"Away\",\r\n      field: \"awayName\",\r\n      lookup: backendService.teams,\r\n      editable: \"never\",\r\n    },\r\n    { title: \"Score\", field: \"away\", type: \"numeric\" },\r\n    {\r\n      title: \"Coefficient\",\r\n      field: \"coefficient\",\r\n      type: \"numeric\",\r\n      editable: \"never\",\r\n    },\r\n    { title: \"Enable\", field: \"enable\", type: \"boolean\", editable: \"never\" },\r\n    {\r\n      title: \"Pets\",\r\n      field: \"pets\",\r\n      editable: \"never\"\r\n    },\r\n    {\r\n      title: \"Money\",\r\n      field: \"money\",\r\n      editable: \"never\"\r\n    },\r\n    //  { title: \"MySk\", render: rowData => <div>Матч {rowData.homeName} - {rowData.awayName} сыгран, счёт {rowData.realHome} : {rowData.realAway}</div>},\r\n    // { title: \"Pets\", field: \"pets\", type: \"numeric\",  editable: \"never\" }\r\n    // {\r\n    //   title: \"Pets\",\r\n    //   render: (rowData) => (\r\n    //     <div\r\n    //       style={{ backgroundColor: rowData[\"pets\"] === 5 ? \"red\" : rowData[\"pets\"] === 3 ? \"yellow\" : rowData[\"pets\"] === 1? \"green\" : \"white\"  }}\r\n    //     >\r\n    //       {rowData.pets}{\" \"}\r\n    //     </div>\r\n    //   ),\r\n    // },\r\n  ];\r\n\r\n  useEffect(() => {\r\n    const user = JSON.parse(localStorage.getItem(\"user\"));\r\n    setCurrentUser(user);\r\n    backendService\r\n      .getStakesByUserId(user._id)\r\n      .then((stakes) => setStakes(stakes));\r\n    backendService.getAll(\"matches\").then((matches) => setMatches(matches));\r\n  }, []);\r\n\r\n  const getMergedArray = (stakesArr, matchesArr) => {\r\n    return matchesArr.map((match) => {\r\n      let stake = stakesArr.find((item) => item.matchNo === match.matchNo);\r\n      if (stake !== undefined && match.matchNo === stake.matchNo) {\r\n        let temp = Object.assign({}, match); //может можно без копирования объекта\r\n        temp.home = stake.home;\r\n        temp.away = stake.away;\r\n        temp.realHome = match.home;\r\n        temp.realAway = match.away;\r\n        temp.pets = backendService.calcPets(\r\n          temp.home,\r\n          temp.away,\r\n          temp.realHome,\r\n          temp.realAway\r\n        );\r\n         temp.money = stake.money;\r\n      // temp.money = backendService.calcMoney(0,1)\r\n        return (match = temp);\r\n      } else {\r\n        return match;\r\n      }\r\n    });\r\n  };\r\n\r\n  if (matches.loading || stakes.loading)\r\n    return <div><CircularProgress/> </div>;\r\n\r\n  return (\r\n    <div>\r\n      <MyMenu currentUser = {currentUser} />\r\n      <MaterialTable\r\n        options={{\r\n          pageSize: 10,\r\n          pageSizeOptions: [10, 51],\r\n          sorting: true,\r\n          rowStyle: (rowData) => {\r\n            if (rowData.pets === 5) {\r\n              return { backgroundColor: \"#C9B037\" }; //gold\r\n            } else if (rowData.pets === 3) {\r\n              return { backgroundColor: \"#B4B4B4\" }; //silver\r\n            } else if (rowData.pets === 1) {\r\n              return { backgroundColor: \"#AD8A56\" }; //bronze\r\n            }\r\n          },\r\n        }}\r\n        title={`Это домашняя страница, тут нужно делать ставки, ${currentUser.username}, для этого воспользуйся пиктограммой карандаша в строке, которую хочешь исправить`}\r\n        columns={columns}\r\n        data={getMergedArray(stakes, matches)}\r\n        detailPanel={(rowData) => {\r\n          if (rowData.enable === false) {\r\n            return (\r\n              <div>\r\n                Матч {rowData.homeName} - {rowData.awayName} сыгран, счёт{\" \"}\r\n                {rowData.realHome} : {rowData.realAway}\r\n              </div>\r\n            );\r\n          }\r\n        }}\r\n        editable={{\r\n          isEditable: (rowData) => rowData.enable === true,\r\n          onRowUpdate: (newData, oldData) =>\r\n            backendService\r\n              .setStakesByUserId(currentUser._id, {\r\n                // matchNo: newData.matchNo,\r\n                // home: newData.home,\r\n                // away: newData.away,\r\n                ...newData,\r\n              })\r\n              .then((data) => {\r\n                setStakes((stakes) =>\r\n                  stakes.map((item) => {\r\n                    let updatedStake = data.stakes.find(\r\n                      (st) => st.matchNo === newData.matchNo\r\n                    );\r\n                    if (item.matchNo === updatedStake.matchNo) {\r\n                      let temp = Object.assign({}, item);\r\n                      temp.home = updatedStake.home;\r\n                      temp.away = updatedStake.away;\r\n                      return (item = temp);\r\n                    } else {\r\n                      return item;\r\n                    }\r\n                  })\r\n                );\r\n              }),\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n}\r\nexport { HomePage };\r\n","import React, { useState } from \"react\";\r\nimport { backendService } from \"./backend.service\";\r\nimport { Alert, AlertTitle } from \"@material-ui/lab\";\r\nimport { CircularProgress } from \"@material-ui/core\";\r\nimport {\r\n  Visibility,\r\n  VisibilityOff,\r\n} from \"@material-ui/icons\";\r\nimport {\r\n  Button,\r\n  Grid,\r\n  Typography,\r\n  Input,\r\n  InputLabel,\r\n  IconButton,\r\n  InputAdornment,\r\n  FormControl,\r\n} from \"@material-ui/core\";\r\n\r\nlet crypto = require(\"crypto\");\r\n\r\nconst LoginPage = (props) => {\r\n  backendService.logout();\r\n  const [state, setState] = useState({\r\n    username: \"\",\r\n    password: \"\",\r\n    error: \"\",\r\n    loading: false,\r\n    submitted: false,\r\n    showPassword: false\r\n  });\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setState((state) => ({ ...state, [name]: value }));\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    setState((state) => ({ ...state, submitted: true }));\r\n    const { username, password } = state;\r\n\r\n    // stop here if form is invalid\r\n    if (!(username && password)) {\r\n      return;\r\n    }\r\n\r\n    setState((state) => ({ ...state, loading: true }));\r\n    backendService\r\n      .login(\r\n        username,\r\n        crypto.createHash(\"sha256\").update(password).digest(\"base64\")\r\n      )\r\n      .then(\r\n        () => {\r\n          const { from } = props.location.state || {\r\n            from: { pathname: \"/\" },\r\n          };\r\n          props.history.push(from);\r\n        },\r\n        (error) => {\r\n          setState((state) => ({ ...state, error: error, loading: false }));\r\n        }\r\n      );\r\n  };\r\n\r\n  const handleClickShowPassword = (sp) => {\r\n    setState((state) => ({ ...state, showPassword: sp }));\r\n };\r\n\r\n const handleMouseDownPassword = (event) => {\r\n   event.preventDefault();\r\n };\r\n // добавить Alert вместо div и ShowPassword\r\n  return (\r\n    <Grid container>\r\n      <Grid item>\r\n        <Typography variant=\"h3\" gutterBottom>\r\n          Login:\r\n        </Typography>\r\n      </Grid>\r\n\r\n        <Grid container>\r\n          <FormControl>\r\n            <InputLabel htmlFor=\"username\">Username</InputLabel>\r\n            <Input\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              name=\"username\"\r\n              value={state.username}\r\n              onChange={handleChange}\r\n            />\r\n            {state.submitted && !state.username && (\r\n                      <Alert severity=\"warning\">\r\n                      <AlertTitle>Username is required</AlertTitle>\r\n                    </Alert>\r\n            )}\r\n          </FormControl>\r\n          <FormControl>\r\n            <InputLabel htmlFor=\"password\">Password</InputLabel>\r\n            <Input\r\n              type={state.showPassword ? \"text\" : \"password\"}\r\n              className=\"form-control\"\r\n              name=\"password\"\r\n              value={state.password}\r\n              onChange={handleChange}\r\n              endAdornment={\r\n                <InputAdornment position=\"end\">\r\n                  <IconButton\r\n                    onClick={() => handleClickShowPassword(!state.showPassword)}\r\n                    onMouseDown={handleMouseDownPassword}\r\n                  >\r\n                    {state.showPassword ? (\r\n                      <Visibility />\r\n                    ) : (\r\n                      <VisibilityOff />\r\n                    )}\r\n                  </IconButton>\r\n                </InputAdornment>\r\n              }\r\n            />\r\n            {state.submitted && !state.password && (\r\n                      <Alert severity=\"warning\">\r\n                      <AlertTitle>Password is required</AlertTitle>\r\n                    </Alert>\r\n            )}\r\n          </FormControl>\r\n        </Grid>\r\n\r\n        <Grid item>\r\n          <Button type=\"submit\" variant=\"contained\" disabled={state.loading} onClick={handleSubmit}>\r\n            Login\r\n          </Button>\r\n          {state.loading && (\r\n            <CircularProgress/> \r\n          )}\r\n            {state.error && (\r\n            <Alert severity=\"error\">\r\n              <AlertTitle> {state.error}</AlertTitle>\r\n            </Alert>\r\n          )}\r\n        </Grid>\r\n      \r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport { LoginPage };\r\n\r\n// import React, { useState, useEffect } from \"react\";\r\n// import { backendService } from \"./backend.service\";\r\n\r\n// let crypto = require('crypto');\r\n\r\n// class LoginPage extends React.Component {\r\n//   constructor(props) {\r\n//     super(props);\r\n\r\n//     backendService.logout();\r\n\r\n//     this.state = {\r\n//       username: \"\",\r\n//       password: \"\",\r\n//       submitted: false,\r\n//       loading: false,\r\n//       error: \"\",\r\n//     };\r\n\r\n//     this.handleChange = this.handleChange.bind(this);\r\n//     this.handleSubmit = this.handleSubmit.bind(this);\r\n//   }\r\n\r\n//   handleChange(e) {\r\n//     const { name, value } = e.target;\r\n//     this.setState({ [name]: value });\r\n//   }\r\n\r\n//   handleSubmit(e) {\r\n//     e.preventDefault();\r\n\r\n//     this.setState({ submitted: true });\r\n//     const { username, password, returnUrl } = this.state;\r\n\r\n//     // stop here if form is invalid\r\n//     if (!(username && password)) {\r\n//       return;\r\n//     }\r\n\r\n//     this.setState({ loading: true });\r\n//     backendService.login(username, crypto.createHash('sha256').update(password).digest('base64')).then(\r\n//       (user) => {\r\n//         const { from } = this.props.location.state || {\r\n//           from: { pathname: \"/\" },\r\n//         };\r\n//         this.props.history.push(from);\r\n//       },\r\n//       (error) => this.setState({ error, loading: false })\r\n//     );\r\n//   }\r\n\r\n//   render() {\r\n//     const { username, password, submitted, loading, error } = this.state;\r\n//     return (\r\n//       <div className=\"col-md-6 col-md-offset-3\">\r\n//         <div className=\"alert alert-info\">\r\n//           Username: test\r\n//           <br />\r\n//           Password: test\r\n//         </div>\r\n//         <h2>Login</h2>\r\n//         <form name=\"form\" onSubmit={this.handleSubmit}>\r\n//           <div\r\n//             className={\r\n//               \"form-group\" + (submitted && !username ? \" has-error\" : \"\")\r\n//             }\r\n//           >\r\n//             <label htmlFor=\"username\">Username</label>\r\n//             <input\r\n//               type=\"text\"\r\n//               className=\"form-control\"\r\n//               name=\"username\"\r\n//               value={username}\r\n//               onChange={this.handleChange}\r\n//             />\r\n//             {submitted && !username && (\r\n//               <div className=\"help-block\">Username is required</div>\r\n//             )}\r\n//           </div>\r\n//           <div\r\n//             className={\r\n//               \"form-group\" + (submitted && !password ? \" has-error\" : \"\")\r\n//             }\r\n//           >\r\n//             <label htmlFor=\"password\">Password</label>\r\n//             <input\r\n//               type=\"password\"\r\n//               className=\"form-control\"\r\n//               name=\"password\"\r\n//               value={password}\r\n//               onChange={this.handleChange}\r\n//             />\r\n//             {submitted && !password && (\r\n//               <div className=\"help-block\">Password is required</div>\r\n//             )}\r\n//           </div>\r\n//           <div className=\"form-group\">\r\n//             <button className=\"btn btn-primary\" disabled={loading}>\r\n//               Login\r\n//             </button>\r\n//             {loading && (\r\n//               <img src=\"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==\" />\r\n//             )}\r\n//           </div>\r\n//           {error && <div className={\"alert alert-danger\"}>{error}</div>}\r\n//         </form>\r\n//       </div>\r\n//     );\r\n//   }\r\n// }\r\n\r\n// export { LoginPage };\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { backendService } from \"./backend.service\";\r\nimport { Alert, AlertTitle } from \"@material-ui/lab\";\r\nimport {\r\n  Visibility,\r\n  VisibilityOff,\r\n  Save,\r\n  Delete,\r\n  Add,\r\n  CloudUpload\r\n} from \"@material-ui/icons\";\r\nimport {\r\n  Checkbox,\r\n  Button,\r\n  Grid,\r\n  Typography,\r\n  Input,\r\n  InputLabel,\r\n  IconButton,\r\n  InputAdornment,\r\n  TextField,\r\n  FormControl,\r\n  Fab,\r\n  CircularProgress,\r\n} from \"@material-ui/core\";\r\nimport { MyMenu } from \"./MyMenu\";\r\n\r\nconst crypto = require(\"crypto\");\r\n\r\nfunction AdminPage() {\r\n  const [currentUser, setCurrentUser] = useState({});\r\n  const [newUser, setNewUser] = useState(\"\");\r\n  const [users, setUsers] = useState({ loading: true });\r\n  const [answer, setAnswer] = useState(false);\r\n\r\n  useEffect(() => {\r\n    let clean = false;\r\n    setCurrentUser(JSON.parse(localStorage.getItem(\"user\")));\r\n    backendService.getAll(\"users\").then((users) => {\r\n      //это чтобы избежать рендера на не существующих объектах\r\n      if (!clean) {\r\n        setUsers(\r\n          users.map((item) => ({\r\n            ...item,\r\n            passwordChanged: false,\r\n            showPassword: false,\r\n          }))\r\n        );\r\n      }\r\n    });\r\n    return () => (clean = true);\r\n  }, []);\r\n\r\n  const handleAddItem = () => {\r\n    backendService\r\n      .addOne(\"users\", { username: newUser.username })\r\n      .then((newUser) => {\r\n        setUsers((users) => users.concat(newUser));\r\n        setAnswer(\r\n          JSON.parse(`{\"message\":\"User ${newUser.username} has been added\"}`)\r\n        );\r\n        setNewUser({ username: \"\" });\r\n      });\r\n  };\r\n\r\n  const handleChangeNewUserName = (event) => {\r\n    setNewUser({ username: event.target.value });\r\n  };\r\n\r\n  const handleDeleteUser = (id) => {\r\n    backendService\r\n      .deleteOne(\"users\", id)\r\n      .then(setUsers((users) => users.filter((item) => item._id !== id)))\r\n      .then((ans) => setAnswer(ans));\r\n  };\r\n\r\n  const handleSaveUser = (id) => {\r\n    const foundUser = { ...users.find((item) => item._id === id) };\r\n    backendService\r\n      .updateOne(\"users\", {\r\n        ...foundUser,\r\n        password: foundUser.passwordChanged\r\n          ? crypto\r\n              .createHash(\"sha256\")\r\n              .update(foundUser.password)\r\n              .digest(\"base64\")\r\n          : foundUser.password,\r\n      })\r\n      .then((data) => {\r\n        setUsers(\r\n          users.map((item) => (item._id === data._id ? (item = data) : item))\r\n        );\r\n        setAnswer(\r\n          JSON.parse(`{\"message\":\"User ${data.username} has been changed\"}`)\r\n        );\r\n      });\r\n  };\r\n\r\n  // const handleChangeField = (event) => {\r\n  //   let value = event.target.value\r\n  //   const { name, id } = event.target\r\n  //   if (name === 'isAdmin') {\r\n  //     value = event.target.checked\r\n  //   }\r\n  //   setUsers(users.map((item) => ({ ...item, name: item._id === id ? value : name })))\r\n  // }\r\n\r\n  const handleChangeField = (e) => {\r\n    let { name, value, id } = e.target;\r\n    if (name === \"isAdmin\") {\r\n      value = e.target.checked;\r\n    }\r\n    setUsers((users) =>\r\n      users.map((item) => {\r\n        if (item._id === id) {\r\n          let temp = Object.assign({}, item);\r\n          temp[name] = value;\r\n          if (name === \"password\") temp.passwordChanged = true;\r\n          return (item = temp);\r\n        } else {\r\n          return item;\r\n        }\r\n      })\r\n    );\r\n  };\r\n\r\n  const handleClickShowPassword = (id) => {\r\n    setUsers(\r\n      users.map((item) => ({\r\n        ...item,\r\n        showPassword: item._id === id ? !item.showPassword : item.showPassword,\r\n      }))\r\n    );\r\n  };\r\n\r\n  const handleMouseDownPassword = (event) => {\r\n    event.preventDefault();\r\n  };\r\n\r\n  const handleUpdateMoney= () => {\r\n    backendService.calcMoney().then(data => setAnswer(JSON.parse(`{\"message\":\"Update ${data}\"}`)));\r\n  }\r\n  \r\n  const handleZeroingMoney= () => {\r\n    backendService.zeroingMoney().then(data => setAnswer(JSON.parse(`{\"message\":\"Zeroing ${data}\"}`)));\r\n  }\r\n\r\n  //тут можно модную крутилку добавить CircularProgress или еще чего.\r\n  if (users.loading) return <div><CircularProgress/></div>;\r\n\r\n  if (currentUser.isAdmin) {\r\n    return (\r\n      <Grid container>\r\n        <Grid item>\r\n          <MyMenu currentUser={currentUser} />\r\n        </Grid>\r\n        <Grid item>\r\n          <Typography variant=\"h3\" gutterBottom>\r\n            Users control panel: {currentUser.username}\r\n          </Typography>\r\n        </Grid>\r\n        {users.length && (\r\n          <Grid container>\r\n            {users.map((user, index) => (\r\n              <Grid item key={user._id}>\r\n                <TextField\r\n                  type=\"text_u\"\r\n                  label=\"Username\"\r\n                  id={user._id}\r\n                  name=\"username\"\r\n                  defaultValue={user.username}\r\n                  onChange={handleChangeField}\r\n                />\r\n                <FormControl>\r\n                  <InputLabel htmlFor=\"standard-adornment-password\">\r\n                    Password\r\n                  </InputLabel>\r\n                  <Input\r\n                    id={user._id}\r\n                    type={user.showPassword ? \"text\" : \"password\"}\r\n                    name=\"password\"\r\n                    //                    defaultValue={user.password}\r\n                    onChange={handleChangeField}\r\n                    endAdornment={\r\n                      <InputAdornment position=\"end\">\r\n                        <IconButton\r\n                          onClick={() => handleClickShowPassword(user._id)}\r\n                          onMouseDown={handleMouseDownPassword}\r\n                        >\r\n                          {user.showPassword ? (\r\n                            <Visibility />\r\n                          ) : (\r\n                            <VisibilityOff />\r\n                          )}\r\n                        </IconButton>\r\n                      </InputAdornment>\r\n                    }\r\n                  />\r\n                </FormControl>\r\n                <TextField\r\n                  type=\"text_f\"\r\n                  label=\"First name\"\r\n                  id={user._id}\r\n                  name=\"firstName\"\r\n                  defaultValue={user.firstName}\r\n                  onChange={handleChangeField}\r\n                />\r\n                <TextField\r\n                  type=\"text_l\"\r\n                  label=\"Last name\"\r\n                  id={user._id}\r\n                  name=\"lastName\"\r\n                  defaultValue={user.lastName}\r\n                  onChange={handleChangeField}\r\n                />\r\n                <TextField\r\n                  type=\"text_e\"\r\n                  label=\"Email\"\r\n                  id={user._id}\r\n                  name=\"email\"\r\n                  defaultValue={user.email}\r\n                  onChange={handleChangeField}\r\n                />\r\n                <Checkbox\r\n                  type=\"checkbox\"\r\n                  id={user._id}\r\n                  name=\"isAdmin\"\r\n                  defaultChecked={user.isAdmin}\r\n                  onClick={handleChangeField}\r\n                />\r\n                <Button\r\n                  type=\"button\"\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  onClick={() => handleSaveUser(user._id)}\r\n                  startIcon={<Save />}\r\n                >\r\n                  {\" \"}\r\n                  Save{\" \"}\r\n                </Button>\r\n                <Button\r\n                  type=\"button\"\r\n                  variant=\"contained\"\r\n                  onClick={() => handleDeleteUser(user._id)}\r\n                  startIcon={<Delete />}\r\n                >\r\n                  {\" \"}\r\n                  Delete{\" \"}\r\n                </Button>\r\n                <br />\r\n                <br />\r\n              </Grid>\r\n            ))}\r\n          </Grid>\r\n        )}\r\n        <Grid item>\r\n          <TextField\r\n            type=\"text_ a\"\r\n            onChange={handleChangeNewUserName}\r\n            value={newUser.username}\r\n          />\r\n          <Fab\r\n            color=\"primary\"\r\n            aria-label=\"add\"\r\n            onClick={handleAddItem}\r\n            disabled={!newUser}\r\n          >\r\n            <Add />\r\n          </Fab>\r\n          <br />\r\n          <br />\r\n          {answer && (\r\n            <Alert severity=\"success\">\r\n              <AlertTitle> {answer.message}</AlertTitle>\r\n            </Alert>\r\n          )}\r\n        </Grid>\r\n        <Grid container>\r\n            <Grid item>\r\n              <Button\r\n                    type=\"button\"\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    onClick={handleUpdateMoney}\r\n                    startIcon={<CloudUpload />}\r\n                  >\r\n                    {\" \"}\r\n                    Обновить суммы{\" \"}\r\n                  </Button>\r\n            </Grid>\r\n            <Grid item>\r\n              <Button\r\n                    type=\"button\"\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    onClick={handleZeroingMoney}\r\n                    startIcon={<Delete />}\r\n                  >\r\n                    {\" \"}\r\n                    Обнулить суммы{\" \"}\r\n                  </Button>\r\n            </Grid>\r\n          </Grid>\r\n      </Grid>\r\n    );\r\n  } else\r\n    return (\r\n      <div>\r\n        <h1>Access denied</h1>\r\n      </div>\r\n    );\r\n}\r\n\r\nexport { AdminPage };\r\n","import React, { useState, useEffect } from \"react\";\r\nimport MaterialTable from \"material-table\";\r\nimport { backendService } from \"./backend.service\";\r\nimport { MyMenu } from \"./MyMenu\";\r\nimport { CircularProgress } from \"@material-ui/core\";\r\n\r\nfunction InfoPage() {\r\n  const [currentUser, setCurrentUser] = useState({});\r\n  const [matches, setMatches] = useState({ loading: true });\r\n\r\n  const columns = [\r\n    { title: \"_id\", field: \"_id\", hidden: true },\r\n    { title: \"№\", field: \"matchNo\", defaultSort: \"asc\" },\r\n    { title: \"Home\", field: \"homeName\", lookup: backendService.teams },\r\n    { title: \"Score\", field: \"home\", type: \"numeric\" },\r\n    { title: \"Away\", field: \"awayName\", lookup: backendService.teams },\r\n    { title: \"Score\", field: \"away\", type: \"numeric\" },\r\n    { title: \"Coefficient\", field: \"coefficient\", type: \"numeric\" },\r\n    { title: \"Enable\", field: \"enable\", type: \"boolean\" },\r\n    { title: \"Visability\", field: \"visability\", type: \"boolean\" },\r\n  ];\r\n\r\n  useEffect(() => {\r\n    setCurrentUser(JSON.parse(localStorage.getItem(\"user\")));\r\n    backendService.getAll(\"matches\").then((matches) => setMatches(matches));\r\n  }, []);\r\n\r\n  if (matches.loading) return <div><CircularProgress/> </div>;\r\n\r\n  if (currentUser.isAdmin) {\r\n    return (\r\n      <div>\r\n        <MyMenu currentUser = {currentUser} />\r\n        <MaterialTable\r\n          options={{\r\n            pageSize: 10,\r\n            pageSizeOptions: [10, 51],\r\n          }}\r\n          title={`Информация о матчах, ${currentUser.username}`}\r\n          columns={columns}\r\n          data={matches}\r\n          editable={{\r\n            onRowAdd: (newData) =>\r\n              backendService\r\n                .addOne(\"matches\", {\r\n                  ...newData,\r\n                })\r\n                .then(setMatches((matches) => matches.concat(newData))),\r\n            onRowUpdate: (newData, oldData) =>\r\n              backendService\r\n                .updateOne(\"matches\", {\r\n                  ...newData,\r\n                })\r\n                .then((data) =>\r\n                  setMatches((matches) => matches.map((item) => (item._id === data._id ? data : item)))),\r\n            onRowDelete: (oldData) =>\r\n                  backendService\r\n                    .deleteOne(\"matches\", oldData._id)\r\n                    .then(setMatches((matches) => matches.filter((item) => item._id !== oldData._id)))\r\n          }}\r\n        />\r\n      </div>\r\n    );\r\n  } else\r\n    return (\r\n      <div>\r\n        <MyMenu currentUser = {currentUser} />\r\n        <MaterialTable\r\n          options={{\r\n            pageSize: 10,\r\n            pageSizeOptions: [10, 51],\r\n          }}\r\n          title={`${currentUser.username}, это наш эталон, реальный счёт, коэффициенты на матчи, их доступность для ставок и видимость собраны тут`}\r\n          columns={columns.slice(0, -2)}\r\n          data={matches}\r\n        />\r\n      </div>\r\n    );\r\n}\r\nexport { InfoPage };\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { CircularProgress } from \"@material-ui/core\";\r\nimport MaterialTable from \"material-table\";\r\nimport { backendService } from \"./backend.service\";\r\nimport { MyMenu } from \"./MyMenu\";\r\n\r\nfunction ResultPage() {\r\n  const [currentUser, setCurrentUser] = useState({});\r\n  const [columns, setColumns] = useState({ loading: true });\r\n  const [data, setData] = useState({ loading: true });\r\n\r\n  useEffect(() => {\r\n    setCurrentUser(JSON.parse(localStorage.getItem(\"user\")));\r\n\r\n    (async () => {\r\n      const users = await backendService.getAll(\"users\");\r\n      const matches = await backendService.getAll(\"matches\");\r\n      // const sortedMatches = matches.sort((a, b) => {\r\n      //   return a.matchNo - b.matchNo;\r\n      // });\r\n      const sortedMatches = backendService.getSortedMatches(matches);\r\n      const onlyMatches = sortedMatches.map((match, index) => {\r\n        let add =\r\n          match.home !== null && match.home !== undefined\r\n            ? `(${match.home}:${match.away})`\r\n            : \"\";\r\n        return {\r\n          title: `${match.homeName} - ${match.awayName} ${add}`,\r\n          field: `${match.matchNo}`,\r\n          render: (rowData) => (\r\n            <div\r\n              style={{\r\n                backgroundColor:\r\n                  rowData[`pets_${index + 1}`] === 5\r\n                    ? \"#C9B037\"\r\n                    : rowData[`pets_${index + 1}`] === 3\r\n                    ? \"#B4B4B4\"\r\n                    : rowData[`pets_${index + 1}`] === 1\r\n                    ? \"#AD8A56\"\r\n                    : \"white\",\r\n              }}\r\n            >\r\n              {rowData[index + 1]}\r\n            </div>\r\n          ),\r\n        };\r\n      });\r\n      const columns = [\r\n        { title: \"Пользователи\", field: \"user\" },\r\n        { title: \"Очки\", field: \"pets\" },\r\n      ].concat(onlyMatches);\r\n      setColumns(columns);\r\n\r\n      const data = users.map((user) => {\r\n        let temp = Object.assign({}, user);\r\n        temp.user = user.username;\r\n        temp.pets = 0;\r\n        for (let i = 1; i < 52; i++) {\r\n          let match = user.stakes.find((item) => item.matchNo === i);\r\n          let realMatch = matches.find((item) => item.matchNo === i);\r\n          if (\r\n            match !== undefined &&\r\n            realMatch !== undefined &&\r\n            realMatch.visability === false\r\n          )\r\n            continue;\r\n          let pets =\r\n            match !== undefined && realMatch !== undefined\r\n              ? backendService.calcPets(\r\n                  match.home,\r\n                  match.away,\r\n                  realMatch.home,\r\n                  realMatch.away\r\n                )\r\n              : 0;\r\n          temp[i] =\r\n            match.home !== null && match.home !== undefined\r\n              ? `${match.home}:${match.away} (${pets})`\r\n              : \"\";\r\n          temp[`pets_${i}`] = pets;\r\n          temp.pets = temp.pets + pets;\r\n        }\r\n        return temp;\r\n      });\r\n      setData(data);\r\n    })();\r\n  }, []);\r\n\r\n  if (columns.loading || data.loading) return <div><CircularProgress/></div>;\r\n\r\n  return (\r\n    <div>\r\n      <MyMenu  currentUser = {currentUser} />\r\n      <MaterialTable\r\n        options={{\r\n          pageSize: 10,\r\n          pageSizeOptions: [10, 51],\r\n        }}\r\n        title={`Это общая таблица результатов, ${currentUser.username}, тут ничего не нужно редактировать, просто посмотри как справляются другие игроки`}\r\n        columns={columns}\r\n        data={data}\r\n      />\r\n    </div>\r\n  );\r\n}\r\nexport { ResultPage };\r\n","import React from \"react\";\r\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\r\n\r\nimport { PrivateRoute } from \"./PrivateRoute\";\r\nimport { HomePage } from \"./HomePage\";\r\nimport { LoginPage } from \"./LoginPage\";\r\nimport { AdminPage } from \"./AdminPage\";\r\nimport { InfoPage } from \"./InfoPage\";\r\nimport { ResultPage } from \"./ResultPage\";\r\n\r\nfunction App() {\r\n  return (\r\n    <div>\r\n      <Router>\r\n        <Switch>\r\n          <div>\r\n            <PrivateRoute exact path=\"/\" component={HomePage} />\r\n            <Route path=\"/login\" component={LoginPage} />\r\n            <PrivateRoute exact path=\"/admin\" component={AdminPage} />\r\n            <PrivateRoute exact path=\"/info\" component={InfoPage} />\r\n            <PrivateRoute exact path=\"/result\" component={ResultPage} />\r\n          </div>\r\n        </Switch>\r\n      </Router>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}