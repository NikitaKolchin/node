(this["webpackJsonpreact-client"]=this["webpackJsonpreact-client"]||[]).push([[0],{449:function(e,t,n){e.exports=n(627)},548:function(e,t){},550:function(e,t){},584:function(e,t){},585:function(e,t){},627:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(18),o=n.n(c),u=n(99),s=n(108),i=n(441),l=function(e){var t=e.component,n=Object(i.a)(e,["component"]);return r.a.createElement(s.b,Object.assign({},n,{render:function(e){return localStorage.getItem("user")?r.a.createElement(t,e):r.a.createElement(s.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},m=n(31),d=n(37),f=n(118),p=n.n(f),h=n(16),b=n.n(h),v=n(33),E=n(137),w={};"\u0422\u0443\u0440\u0446\u0438\u044f,\u0418\u0442\u0430\u043b\u0438\u044f,\u0423\u044d\u043b\u044c\u0441,\u0428\u0432\u0435\u0439\u0446\u0430\u0440\u0438\u044f,\u0414\u0430\u043d\u0438\u044f,\u0424\u0438\u043d\u043b\u044f\u043d\u0434\u0438\u044f,\u0411\u0435\u043b\u044c\u0433\u0438\u044f,\u0420\u043e\u0441\u0441\u0438\u044f,\u041d\u0438\u0434\u0435\u0440\u043b\u0430\u043d\u0434\u044b,\u0423\u043a\u0440\u0430\u0438\u043d\u0430,\u0410\u0432\u0441\u0442\u0440\u0438\u044f,\u0421\u0435\u0432\u0435\u0440\u043d\u0430\u044f \u041c\u0430\u043a\u0435\u0434\u043e\u043d\u0438\u044f,\u0410\u043d\u0433\u043b\u0438\u044f,\u0425\u043e\u0440\u0432\u0430\u0442\u0438\u044f,\u0428\u043e\u0442\u043b\u0430\u043d\u0434\u0438\u044f,\u0427\u0435\u0445\u0438\u044f,\u0418\u0441\u043f\u0430\u043d\u0438\u044f,\u0428\u0432\u0435\u0446\u0438\u044f,\u041f\u043e\u043b\u044c\u0448\u0430,\u0421\u043b\u043e\u0432\u0430\u043a\u0438\u044f,\u0412\u0435\u043d\u0433\u0440\u0438\u044f,\u041f\u043e\u0440\u0442\u0443\u0433\u0430\u043b\u0438\u044f,\u0424\u0440\u0430\u043d\u0446\u0438\u044f,\u0413\u0435\u0440\u043c\u0430\u043d\u0438\u044f".split(",").forEach((function(e){return w=Object(m.a)({},w,Object(E.a)({},e,e))}));var g=function(e){return e.sort((function(e,t){return e.matchNo-t.matchNo}))},y=function(){var e=Object(v.a)(b.a.mark((function e(){var t,n,a,r,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.getAll("users");case 2:return t=e.sent,e.next=5,A.getAll("matches");case 5:return n=e.sent,a=g(n),r=a.map((function(e,n){var a={matchNo:e.matchNo,home:e.home,away:e.away,passed:!1,coefficient:e.coefficient,usersStakes:[]};return e.enable||(a.passed=!0,t.forEach((function(e){var t={};t.userId=e._id,t.username=e.username,null==e.stakes[n].home||null==e.stakes[n].away?(t.home=10,t.away=10):(t.home=e.stakes[n].home,t.away=e.stakes[n].away),a.usersStakes.push(t)}))),a})),c=r.filter((function(e){return!0===e.passed})),console.log(c),e.abrupt("return",c);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(v.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.getAll("users");case 2:return e.sent.forEach((function(e){e.stakes.forEach((function(t){A.setMoneyByUserId(e._id,{matchNo:t.matchNo,money:0})}))})),e.abrupt("return","done");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(v.a)(b.a.mark((function e(){var t,n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.getAll("users");case 2:return t=e.sent,e.next=5,A.getAll("matches");case 5:return n=e.sent,500,a=0,n.forEach((function(e){a+=e.coefficient})),e.abrupt("return",Math.round(500*t.length/a));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(v.a)(b.a.mark((function e(){var t,n,a,r,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:return t=e.sent,e.next=5,j();case 5:return n=e.sent,a=[],r=n,c=0,t.forEach((function(e){var t=[];e.usersStakes.forEach((function(n){5===A.calcPets(n.home,n.away,e.home,e.away)&&(t.push({userId:n.userId}),console.log(n.username+" "+e.matchNo+"  "+t))})),0===t.length?(c+=n,r=0):(r=n+c,c=0);var o=t.length>0?e.coefficient*r/t.length:0;a.push({matchNo:e.matchNo,vinners:t,money:o})})),a.forEach((function(e){e.vinners.forEach((function(t){A.setMoneyByUserId(t.userId,{matchNo:e.matchNo,money:e.money})}))})),console.log(a),e.abrupt("return","done");case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=JSON.parse(localStorage.getItem("user"));return e&&e.authdata?{Authorization:"Basic "+e.authdata,"Content-Type":"application/json"}:{}},x=function(){return localStorage.removeItem("user")},N=function(){var e=Object(v.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:if(n=e.sent,t.ok){e.next=6;break}return 401===t.status&&(x(),window.location.reload(!0)),e.abrupt("return",Promise.reject(n&&n.message||t.statusText));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(v.a)(b.a.mark((function e(t,n,a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=N,e.next=3,fetch("".concat("http://localhost:4000","/").concat(t),Object(m.a)({method:n,headers:S()},a||{}));case 3:return e.t1=e.sent,e.next=6,(0,e.t0)(e.t1);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),C={get:function(){var e=Object(v.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(t,"GET",n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),post:function(){var e=Object(v.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(t,"POST",n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),put:function(){var e=Object(v.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(t,"PUT",n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),delete:function(){var e=Object(v.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(t,"DELETE",n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},A={login:function(){var e=Object(v.a)(b.a.mark((function e(t,n){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.post("users/authenticate",{headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:n})});case 2:return(a=e.sent)&&(a.authdata=window.btoa(t+":"+n),localStorage.setItem("user",JSON.stringify(a))),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),logout:x,updateOne:function(){var e=Object(v.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.put("".concat(t,"/").concat(n._id),{body:JSON.stringify(Object(m.a)({},n))});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),addOne:function(){var e=Object(v.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.post(t,{body:JSON.stringify(Object(m.a)({},n))});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),deleteOne:function(){var e=Object(v.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",C.delete("".concat(t,"/").concat(n)));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getAll:function(){var e=Object(v.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.get(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getStakesByUserId:function(){var e=Object(v.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.get("users/".concat(t,"/stakes"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setStakesByUserId:function(){var e=Object(v.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.put("users/".concat(t,"/stakes/").concat(n.matchNo),{body:JSON.stringify(Object(m.a)({},n))});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),setMoneyByUserId:function(){var e=Object(v.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.put("users/".concat(t,"/money/").concat(n.matchNo),{body:JSON.stringify(Object(m.a)({},n))});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),teams:w,calcPets:function(e,t,n,a){if(null===e||null===t||null===n||null===a)return 0;var r=e-t,c=n-a;switch(!0){case e===n&&t===a:return 5;case r===c:return 3;case r>0&&c>0||r<0&&c<0||0===r&&0===c:return 1;default:return 0}},calcMoney:k,zeroingMoney:O,getSortedMatches:g},I=n(372),P=n(213),U=n(353);function B(e){var t=Object(a.useState)(null),n=Object(d.a)(t,2),c=n[0],o=n[1],s=function(){o(null)};return r.a.createElement("div",null,r.a.createElement(I.a,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){o(e.currentTarget)}},"\u041c\u0415\u041d\u042e"),r.a.createElement(P.a,{id:"simple-menu",anchorEl:c,keepMounted:!0,open:Boolean(c),onClose:s},r.a.createElement(U.a,null," ",r.a.createElement(u.b,{to:"/"},"\u0414\u043e\u043c\u0430\u0448\u043d\u044f\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430")),r.a.createElement(U.a,{onClick:s},r.a.createElement(u.b,{to:"/result"},"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b")),r.a.createElement(U.a,{onClick:s},r.a.createElement(u.b,{to:"/info"},"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f")),e.currentUser.isAdmin&&r.a.createElement(U.a,{onClick:s},r.a.createElement(u.b,{to:"/admin"},"\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435")),r.a.createElement(U.a,{onClick:s},r.a.createElement(u.b,{to:"/login"},"\u0412\u044b\u0439\u0442\u0438"))))}var J=n(350);function M(){var e=Object(a.useState)({}),t=Object(d.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)({loading:!0}),u=Object(d.a)(o,2),s=u[0],i=u[1],l=Object(a.useState)({loading:!0}),f=Object(d.a)(l,2),h=f[0],b=f[1],v=[{title:"_id",field:"_id",hidden:!0},{title:"\u2116",field:"matchNo",editable:"never",defaultSort:"asc"},{title:"Home",field:"homeName",lookup:A.teams,editable:"never"},{title:"Score",field:"home",type:"numeric"},{title:"Away",field:"awayName",lookup:A.teams,editable:"never"},{title:"Score",field:"away",type:"numeric"},{title:"Coefficient",field:"coefficient",type:"numeric",editable:"never"},{title:"Enable",field:"enable",type:"boolean",editable:"never"},{title:"Pets",field:"pets",editable:"never"},{title:"Money",field:"money",editable:"never"}];Object(a.useEffect)((function(){var e=JSON.parse(localStorage.getItem("user"));c(e),A.getStakesByUserId(e._id).then((function(e){return i(e)})),A.getAll("matches").then((function(e){return b(e)}))}),[]);var E,w;return h.loading||s.loading?r.a.createElement("div",null,r.a.createElement(J.a,null)," "):r.a.createElement("div",null,r.a.createElement(B,{currentUser:n}),r.a.createElement(p.a,{options:{pageSize:10,pageSizeOptions:[10,51],sorting:!0,rowStyle:function(e){return 5===e.pets?{backgroundColor:"#C9B037"}:3===e.pets?{backgroundColor:"#B4B4B4"}:1===e.pets?{backgroundColor:"#AD8A56"}:void 0}},title:"\u042d\u0442\u043e \u0434\u043e\u043c\u0430\u0448\u043d\u044f\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430, \u0442\u0443\u0442 \u043d\u0443\u0436\u043d\u043e \u0434\u0435\u043b\u0430\u0442\u044c \u0441\u0442\u0430\u0432\u043a\u0438, ".concat(n.username,", \u0434\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u0432\u043e\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0441\u044f \u043f\u0438\u043a\u0442\u043e\u0433\u0440\u0430\u043c\u043c\u043e\u0439 \u043a\u0430\u0440\u0430\u043d\u0434\u0430\u0448\u0430 \u0432 \u0441\u0442\u0440\u043e\u043a\u0435, \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u0445\u043e\u0447\u0435\u0448\u044c \u0438\u0441\u043f\u0440\u0430\u0432\u0438\u0442\u044c"),columns:v,data:(E=s,w=h,w.map((function(e){var t=E.find((function(t){return t.matchNo===e.matchNo}));if(void 0!==t&&e.matchNo===t.matchNo){var n=Object.assign({},e);return n.home=t.home,n.away=t.away,n.realHome=e.home,n.realAway=e.away,n.pets=A.calcPets(n.home,n.away,n.realHome,n.realAway),n.money=t.money,e=n}return e}))),detailPanel:function(e){if(!1===e.enable)return r.a.createElement("div",null,"\u041c\u0430\u0442\u0447 ",e.homeName," - ",e.awayName," \u0441\u044b\u0433\u0440\u0430\u043d, \u0441\u0447\u0451\u0442"," ",e.realHome," : ",e.realAway)},editable:{isEditable:function(e){return!0===e.enable},onRowUpdate:function(e,t){return A.setStakesByUserId(n._id,Object(m.a)({},e)).then((function(t){i((function(n){return n.map((function(n){var a=t.stakes.find((function(t){return t.matchNo===e.matchNo}));if(n.matchNo===a.matchNo){var r=Object.assign({},n);return r.home=a.home,r.away=a.away,r}return n}))}))}))}}}))}var z=n(663),D=n(655),T=n(656),H=n(657),V=n(651),F=n(100),L=n(286),R=n(287),q=n(227),G=n(374),Z=n(285),K=n(389),Q=function(e){A.logout();var t=Object(a.useState)({username:"",password:"",error:"",loading:!1,submitted:!1,showPassword:!1}),n=Object(d.a)(t,2),c=n[0],o=n[1],u=function(e){var t=e.target,n=t.name,a=t.value;o((function(e){return Object(m.a)({},e,Object(E.a)({},n,a))}))};return r.a.createElement(V.a,{container:!0},r.a.createElement(V.a,{item:!0},r.a.createElement(F.a,{variant:"h3",gutterBottom:!0},"Login:")),r.a.createElement(V.a,{container:!0},r.a.createElement(L.a,null,r.a.createElement(R.a,{htmlFor:"username"},"Username"),r.a.createElement(q.a,{type:"text",className:"form-control",name:"username",value:c.username,onChange:u}),c.submitted&&!c.username&&r.a.createElement(z.a,{severity:"warning"},r.a.createElement(D.a,null,"Username is required"))),r.a.createElement(L.a,null,r.a.createElement(R.a,{htmlFor:"password"},"Password"),r.a.createElement(q.a,{type:c.showPassword?"text":"password",className:"form-control",name:"password",value:c.password,onChange:u,endAdornment:r.a.createElement(G.a,{position:"end"},r.a.createElement(Z.a,{onClick:function(){return e=!c.showPassword,void o((function(t){return Object(m.a)({},t,{showPassword:e})}));var e},onMouseDown:function(e){e.preventDefault()}},c.showPassword?r.a.createElement(T.a,null):r.a.createElement(H.a,null)))}),c.submitted&&!c.password&&r.a.createElement(z.a,{severity:"warning"},r.a.createElement(D.a,null,"Password is required")))),r.a.createElement(V.a,{item:!0},r.a.createElement(I.a,{type:"submit",variant:"contained",disabled:c.loading,onClick:function(t){t.preventDefault(),o((function(e){return Object(m.a)({},e,{submitted:!0})}));var n=c.username,a=c.password;n&&a&&(o((function(e){return Object(m.a)({},e,{loading:!0})})),A.login(n,K.createHash("sha256").update(a).digest("base64")).then((function(){var t=(e.location.state||{from:{pathname:"/"}}).from;e.history.push(t)}),(function(e){o((function(t){return Object(m.a)({},t,{error:e,loading:!1})}))})))}},"Login"),c.loading&&r.a.createElement(J.a,null),c.error&&r.a.createElement(z.a,{severity:"error"},r.a.createElement(D.a,null," ",c.error))))},W=n(658),X=n(659),Y=n(660),$=n(661),ee=n(370),te=n(429),ne=n(654),ae=n(389);function re(){var e=Object(a.useState)({}),t=Object(d.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(""),u=Object(d.a)(o,2),s=u[0],i=u[1],l=Object(a.useState)({loading:!0}),f=Object(d.a)(l,2),p=f[0],h=f[1],b=Object(a.useState)(!1),v=Object(d.a)(b,2),E=v[0],w=v[1];Object(a.useEffect)((function(){var e=!1;return c(JSON.parse(localStorage.getItem("user"))),A.getAll("users").then((function(t){e||h(t.map((function(e){return Object(m.a)({},e,{passwordChanged:!1,showPassword:!1})})))})),function(){return e=!0}}),[]);var g=function(e){var t=e.target,n=t.name,a=t.value,r=t.id;"isAdmin"===n&&(a=e.target.checked),h((function(e){return e.map((function(e){if(e._id===r){var t=Object.assign({},e);return t[n]=a,"password"===n&&(t.passwordChanged=!0),t}return e}))}))},y=function(e){e.preventDefault()};return p.loading?r.a.createElement("div",null,r.a.createElement(J.a,null)):n.isAdmin?r.a.createElement(V.a,{container:!0},r.a.createElement(V.a,{item:!0},r.a.createElement(B,{currentUser:n})),r.a.createElement(V.a,{item:!0},r.a.createElement(F.a,{variant:"h3",gutterBottom:!0},"Users control panel: ",n.username)),p.length&&r.a.createElement(V.a,{container:!0},p.map((function(e,t){return r.a.createElement(V.a,{item:!0,key:e._id},r.a.createElement(ee.a,{type:"text_u",label:"Username",id:e._id,name:"username",defaultValue:e.username,onChange:g}),r.a.createElement(L.a,null,r.a.createElement(R.a,{htmlFor:"standard-adornment-password"},"Password"),r.a.createElement(q.a,{id:e._id,type:e.showPassword?"text":"password",name:"password",onChange:g,endAdornment:r.a.createElement(G.a,{position:"end"},r.a.createElement(Z.a,{onClick:function(){return t=e._id,void h(p.map((function(e){return Object(m.a)({},e,{showPassword:e._id===t?!e.showPassword:e.showPassword})})));var t},onMouseDown:y},e.showPassword?r.a.createElement(T.a,null):r.a.createElement(H.a,null)))})),r.a.createElement(ee.a,{type:"text_f",label:"First name",id:e._id,name:"firstName",defaultValue:e.firstName,onChange:g}),r.a.createElement(ee.a,{type:"text_l",label:"Last name",id:e._id,name:"lastName",defaultValue:e.lastName,onChange:g}),r.a.createElement(ee.a,{type:"text_e",label:"Email",id:e._id,name:"email",defaultValue:e.email,onChange:g}),r.a.createElement(te.a,{type:"checkbox",id:e._id,name:"isAdmin",defaultChecked:e.isAdmin,onClick:g}),r.a.createElement(I.a,{type:"button",variant:"contained",color:"primary",onClick:function(){return function(e){var t=Object(m.a)({},p.find((function(t){return t._id===e})));A.updateOne("users",Object(m.a)({},t,{password:t.passwordChanged?ae.createHash("sha256").update(t.password).digest("base64"):t.password})).then((function(e){h(p.map((function(t){return t._id===e._id?t=e:t}))),w(JSON.parse('{"message":"User '.concat(e.username,' has been changed"}')))}))}(e._id)},startIcon:r.a.createElement(W.a,null)}," ","Save"," "),r.a.createElement(I.a,{type:"button",variant:"contained",onClick:function(){return t=e._id,void A.deleteOne("users",t).then(h((function(e){return e.filter((function(e){return e._id!==t}))}))).then((function(e){return w(e)}));var t},startIcon:r.a.createElement(X.a,null)}," ","Delete"," "),r.a.createElement("br",null),r.a.createElement("br",null))}))),r.a.createElement(V.a,{item:!0},r.a.createElement(ee.a,{type:"text_ a",onChange:function(e){i({username:e.target.value})},value:s.username}),r.a.createElement(ne.a,{color:"primary","aria-label":"add",onClick:function(){A.addOne("users",{username:s.username}).then((function(e){h((function(t){return t.concat(e)})),w(JSON.parse('{"message":"User '.concat(e.username,' has been added"}'))),i({username:""})}))},disabled:!s},r.a.createElement(Y.a,null)),r.a.createElement("br",null),r.a.createElement("br",null),E&&r.a.createElement(z.a,{severity:"success"},r.a.createElement(D.a,null," ",E.message))),r.a.createElement(V.a,{container:!0},r.a.createElement(V.a,{item:!0},r.a.createElement(I.a,{type:"button",variant:"contained",color:"primary",onClick:function(){A.calcMoney().then((function(e){return w(JSON.parse('{"message":"Update '.concat(e,'"}')))}))},startIcon:r.a.createElement($.a,null)}," ","\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u0443\u043c\u043c\u044b"," ")),r.a.createElement(V.a,{item:!0},r.a.createElement(I.a,{type:"button",variant:"contained",color:"primary",onClick:function(){A.zeroingMoney().then((function(e){return w(JSON.parse('{"message":"Zeroing '.concat(e,'"}')))}))},startIcon:r.a.createElement(X.a,null)}," ","\u041e\u0431\u043d\u0443\u043b\u0438\u0442\u044c \u0441\u0443\u043c\u043c\u044b"," ")))):r.a.createElement("div",null,r.a.createElement("h1",null,"Access denied"))}function ce(){var e=Object(a.useState)({}),t=Object(d.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)({loading:!0}),u=Object(d.a)(o,2),s=u[0],i=u[1],l=[{title:"_id",field:"_id",hidden:!0},{title:"\u2116",field:"matchNo",defaultSort:"asc"},{title:"Home",field:"homeName",lookup:A.teams},{title:"Score",field:"home",type:"numeric"},{title:"Away",field:"awayName",lookup:A.teams},{title:"Score",field:"away",type:"numeric"},{title:"Coefficient",field:"coefficient",type:"numeric"},{title:"Enable",field:"enable",type:"boolean"},{title:"Visability",field:"visability",type:"boolean"}];return Object(a.useEffect)((function(){c(JSON.parse(localStorage.getItem("user"))),A.getAll("matches").then((function(e){return i(e)}))}),[]),s.loading?r.a.createElement("div",null,r.a.createElement(J.a,null)," "):n.isAdmin?r.a.createElement("div",null,r.a.createElement(B,{currentUser:n}),r.a.createElement(p.a,{options:{pageSize:10,pageSizeOptions:[10,51]},title:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u043c\u0430\u0442\u0447\u0430\u0445, ".concat(n.username),columns:l,data:s,editable:{onRowAdd:function(e){return A.addOne("matches",Object(m.a)({},e)).then(i((function(t){return t.concat(e)})))},onRowUpdate:function(e,t){return A.updateOne("matches",Object(m.a)({},e)).then((function(e){return i((function(t){return t.map((function(t){return t._id===e._id?e:t}))}))}))},onRowDelete:function(e){return A.deleteOne("matches",e._id).then(i((function(t){return t.filter((function(t){return t._id!==e._id}))})))}}})):r.a.createElement("div",null,r.a.createElement(B,{currentUser:n}),r.a.createElement(p.a,{options:{pageSize:10,pageSizeOptions:[10,51]},title:"".concat(n.username,", \u044d\u0442\u043e \u043d\u0430\u0448 \u044d\u0442\u0430\u043b\u043e\u043d, \u0440\u0435\u0430\u043b\u044c\u043d\u044b\u0439 \u0441\u0447\u0451\u0442, \u043a\u043e\u044d\u0444\u0444\u0438\u0446\u0438\u0435\u043d\u0442\u044b \u043d\u0430 \u043c\u0430\u0442\u0447\u0438, \u0438\u0445 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0441\u0442\u044c \u0434\u043b\u044f \u0441\u0442\u0430\u0432\u043e\u043a \u0438 \u0432\u0438\u0434\u0438\u043c\u043e\u0441\u0442\u044c \u0441\u043e\u0431\u0440\u0430\u043d\u044b \u0442\u0443\u0442"),columns:l.slice(0,-2),data:s}))}function oe(){var e=Object(a.useState)({}),t=Object(d.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)({loading:!0}),u=Object(d.a)(o,2),s=u[0],i=u[1],l=Object(a.useState)({loading:!0}),m=Object(d.a)(l,2),f=m[0],h=m[1];return Object(a.useEffect)((function(){c(JSON.parse(localStorage.getItem("user"))),Object(v.a)(b.a.mark((function e(){var t,n,a,c,o,u;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.getAll("users");case 2:return t=e.sent,e.next=5,A.getAll("matches");case 5:n=e.sent,a=A.getSortedMatches(n),c=a.map((function(e,t){var n=null!==e.home&&void 0!==e.home?"(".concat(e.home,":").concat(e.away,")"):"";return{title:"".concat(e.homeName," - ").concat(e.awayName," ").concat(n),field:"".concat(e.matchNo),render:function(e){return r.a.createElement("div",{style:{backgroundColor:5===e["pets_".concat(t+1)]?"#C9B037":3===e["pets_".concat(t+1)]?"#B4B4B4":1===e["pets_".concat(t+1)]?"#AD8A56":"white"}},e[t+1])}}})),o=[{title:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438",field:"user"},{title:"\u041e\u0447\u043a\u0438",field:"pets"}].concat(c),i(o),u=t.map((function(e){var t=Object.assign({},e);t.user=e.username,t.pets=0;for(var a=function(a){var r=e.stakes.find((function(e){return e.matchNo===a})),c=n.find((function(e){return e.matchNo===a}));if(void 0!==r&&void 0!==c&&!1===c.visability)return"continue";var o=void 0!==r&&void 0!==c?A.calcPets(r.home,r.away,c.home,c.away):0;t[a]=null!==r.home&&void 0!==r.home?"".concat(r.home,":").concat(r.away," (").concat(o,")"):"",t["pets_".concat(a)]=o,t.pets=t.pets+o},r=1;r<52;r++)a(r);return t})),h(u);case 12:case"end":return e.stop()}}),e)})))()}),[]),s.loading||f.loading?r.a.createElement("div",null,r.a.createElement(J.a,null)):r.a.createElement("div",null,r.a.createElement(B,{currentUser:n}),r.a.createElement(p.a,{options:{pageSize:10,pageSizeOptions:[10,51]},title:"\u042d\u0442\u043e \u043e\u0431\u0449\u0430\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u0430 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432, ".concat(n.username,", \u0442\u0443\u0442 \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0443\u0436\u043d\u043e \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c, \u043f\u0440\u043e\u0441\u0442\u043e \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0438 \u043a\u0430\u043a \u0441\u043f\u0440\u0430\u0432\u043b\u044f\u044e\u0442\u0441\u044f \u0434\u0440\u0443\u0433\u0438\u0435 \u0438\u0433\u0440\u043e\u043a\u0438"),columns:s,data:f}))}var ue=function(){return r.a.createElement("div",null,r.a.createElement(u.a,null,r.a.createElement(s.d,null,r.a.createElement("div",null,r.a.createElement(l,{exact:!0,path:"/",component:M}),r.a.createElement(s.b,{path:"/login",component:Q}),r.a.createElement(l,{exact:!0,path:"/admin",component:re}),r.a.createElement(l,{exact:!0,path:"/info",component:ce}),r.a.createElement(l,{exact:!0,path:"/result",component:oe})))))};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ue,null)),document.getElementById("root"))}},[[449,1,2]]]);
//# sourceMappingURL=main.970575ef.chunk.js.map