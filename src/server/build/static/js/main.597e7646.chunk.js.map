{"version":3,"sources":["PrivateRoute.js","backend.service.js","MyMenu.jsx","HomePage.jsx","LoginPage.jsx","AdminPage.jsx","InfoPage.jsx","ResultPage.jsx","TestPage.jsx","App.js","index.js"],"names":["PrivateRoute","Component","component","rest","render","props","localStorage","getItem","to","pathname","state","from","location","teams","split","forEach","item","getSortedMatches","matches","sort","a","b","matchNo","getAllData","backendService","getAll","users","sortedMatches","allDataNotFiltred","map","match","index","allDataRows","home","away","passed","coefficient","usersStakes","enable","user","allDataRow","userId","_id","username","stakes","push","allData","filter","data","console","log","zeroingMoney","stake","setMoneyByUserId","money","getRandomInt","min","max","Math","floor","random","setTestMatches","numberOfMatches","zeroing","i","updateOne","setTestStakes","setStakesByUserId","getStandartMatchPrice","coefSum","round","length","calcMoney","standartMatchPrice","payments","matchPrice","unrealezedPrize","vinners","calcPets","vin","authHeader","JSON","parse","authdata","Authorization","logout","removeItem","handleResponse","response","json","ok","status","window","reload","Promise","reject","message","statusText","request","url","method","requestOptions","fetch","headers","requestObj","get","post","put","delete","login","password","body","stringify","btoa","setItem","type","obj","addOne","deleteOne","id","getStakesByUserId","realHome","realAway","difference","realDifference","MyMenu","useState","anchorEl","setAnchorEl","handleClose","Button","aria-controls","aria-haspopup","onClick","event","currentTarget","Menu","keepMounted","open","Boolean","onClose","MenuItem","currentUser","isAdmin","HomePage","setCurrentUser","loading","setStakes","setMatches","columns","title","field","hidden","editable","defaultSort","lookup","useEffect","then","stakesArr","matchesArr","CircularProgress","options","pageSize","pageSizeOptions","sorting","rowStyle","rowData","pets","backgroundColor","find","undefined","temp","Object","assign","detailPanel","homeName","awayName","isEditable","onRowUpdate","newData","oldData","updatedStake","st","crypto","require","LoginPage","error","submitted","showPassword","setState","handleChange","e","target","name","value","Grid","container","Typography","variant","gutterBottom","FormControl","InputLabel","htmlFor","Input","className","onChange","Alert","severity","AlertTitle","endAdornment","InputAdornment","position","IconButton","sp","onMouseDown","preventDefault","Visibility","VisibilityOff","disabled","createHash","update","digest","history","AdminPage","newUser","setNewUser","setUsers","answer","setAnswer","clean","passwordChanged","handleChangeField","checked","handleMouseDownPassword","key","TextField","label","defaultValue","firstName","lastName","email","Checkbox","defaultChecked","color","foundUser","handleSaveUser","startIcon","Save","ans","Delete","Fab","aria-label","concat","Add","CloudUpload","InfoPage","onRowAdd","onRowDelete","slice","ResultPage","setColumns","setData","onlyMatches","add","style","realMatch","visability","moneyView","TestPage","stackes","setStackes","App","exact","path","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.597e7646.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\nexport const PrivateRoute = ({ component: Component, ...rest }) => (\r\n  <Route\r\n    {...rest}\r\n    render={(props) =>\r\n      localStorage.getItem(\"user\") ? (\r\n        <Component {...props} />\r\n      ) : (\r\n        <Redirect\r\n          to={{ pathname: \"/login\", state: { from: props.location } }}\r\n        />\r\n      )\r\n    }\r\n  />\r\n);\r\n","//const localBackendHost = \"http://localhost:4000\";\r\nconst cloudBackendHost = \"https://backend-serv.ew.r.appspot.com/\";\r\nlet teams = {};\r\n//\"Бельгия,Италия,Россия,Финляндия,Франция,Польша,Украина,Испания,Турция,Англия,Чехия,Швеция,Нидерланды,Германия,Хорватия,Австрия,Португалия,Швейцария,Дания,Уэльс\"\r\n\"Турция,Италия,Уэльс,Швейцария,Дания,Финляндия,Бельгия,Россия,Нидерланды,Украина,Австрия,Северная Македония,Англия,Хорватия,Шотландия,Чехия,Испания,Швеция,Польша,Словакия,Венгрия,Португалия,Франция,Германия\"\r\n  .split(\",\")\r\n  .forEach((item) => (teams = { ...teams, [item]: item }));\r\n\r\nconst backendHost = cloudBackendHost;\r\n\r\nconst calcPets = (home, away, realHome, realAway) => {\r\n  if (\r\n    home === null ||\r\n    away === null ||\r\n    realHome === null ||\r\n    realAway === null\r\n  ) {\r\n    return 0;\r\n  }\r\n  const difference = home - away;\r\n  const realDifference = realHome - realAway;\r\n  switch (true) {\r\n    case home === realHome && away === realAway:\r\n      return 5;\r\n    case difference === realDifference:\r\n      return 3;\r\n    case (difference > 0 && realDifference > 0) ||\r\n      (difference < 0 && realDifference < 0) ||\r\n      (difference === 0 && realDifference === 0):\r\n      return 1;\r\n    default:\r\n      return 0;\r\n  }\r\n};\r\n\r\nconst getSortedMatches = (matches) => {\r\n  const sortedMatches = matches.sort((a, b) => {\r\n    return a.matchNo - b.matchNo;\r\n  });\r\n  return sortedMatches;\r\n};\r\n\r\nconst getAllData = async () => {\r\n  const users = await backendService.getAll(\"users\");\r\n  const matches = await backendService.getAll(\"matches\");\r\n  const sortedMatches = getSortedMatches(matches);\r\n  const allDataNotFiltred = sortedMatches.map((match, index) => {\r\n    let allDataRows = {\r\n      matchNo: match.matchNo,\r\n      home: match.home,\r\n      away: match.away,\r\n      passed: false,\r\n      coefficient: match.coefficient,\r\n      usersStakes: [],\r\n    };\r\n    if (!match.enable) {\r\n      allDataRows.passed = true;\r\n      users.forEach((user) => {\r\n        let allDataRow = {};\r\n        allDataRow.userId = user._id;\r\n        allDataRow.username = user.username; //убрать потом\r\n        if (\r\n          user.stakes[index].home == null ||\r\n          user.stakes[index].away == null\r\n        ) {\r\n          //сделал ли пользователь ставку в закрытой области\r\n          allDataRow.home = 10;\r\n          allDataRow.away = 10;\r\n        } else {\r\n          allDataRow.home = user.stakes[index].home;\r\n          allDataRow.away = user.stakes[index].away;\r\n        }\r\n        allDataRows.usersStakes.push(allDataRow);\r\n      });\r\n    }\r\n    return allDataRows;\r\n  });\r\n  const allData = allDataNotFiltred.filter((data) => data.passed === true);\r\n  console.log(allData);\r\n  return allData;\r\n};\r\n\r\nconst zeroingMoney = async () => {\r\n  const users = await backendService.getAll(\"users\");\r\n  users.forEach((user) => {\r\n    user.stakes.forEach((stake) => {\r\n      backendService.setMoneyByUserId(user._id, {\r\n        matchNo: stake.matchNo,\r\n        money: 0,\r\n      });\r\n    });\r\n  });\r\n  return \"done\";\r\n};\r\n\r\nconst getRandomInt = (min, max) => {\r\n  return Math.floor(Math.random() * (max - min)) + min;\r\n};\r\n\r\nconst setTestMatches = async (numberOfMatches, zeroing) => {\r\n  const matches = await backendService.getAll(\"matches\");\r\n  const sortedMatches = getSortedMatches(matches);\r\n  for (let i = 0; i < numberOfMatches; i++) {\r\n    let { home, away, enable, ...rest } = sortedMatches[i];\r\n    backendService.updateOne(\"matches\", {\r\n      ...rest,\r\n      home: zeroing?null:getRandomInt(0, 4),\r\n      away: zeroing?null:getRandomInt(0, 4),\r\n      enable: zeroing?true:false,\r\n    });\r\n  }\r\n  return \"done\";\r\n};\r\n\r\nconst setTestStakes= async (numberOfMatches, zeroing) => {\r\n  const users = await backendService.getAll(\"users\");\r\n  users.forEach(user =>{\r\n    for(let i=0; i < numberOfMatches; i++) {\r\n      backendService.setStakesByUserId(user._id, {\r\n        matchNo: user.stakes[i].matchNo,\r\n        home: zeroing?null:getRandomInt(0, 4),\r\n        away: zeroing?null:getRandomInt(0, 4),\r\n      });\r\n    }\r\n  })\r\n  return \"done\";\r\n};\r\n\r\nconst getStandartMatchPrice = async () => {\r\n  const users = await backendService.getAll(\"users\");\r\n  const matches = await backendService.getAll(\"matches\");\r\n  const contribution = 500;\r\n  let coefSum = 0;\r\n  matches.forEach((match) => {\r\n    coefSum += match.coefficient;\r\n  });\r\n  return Math.round((contribution * users.length) / coefSum);\r\n};\r\n\r\nconst calcMoney = async () => {\r\n  const allData = await getAllData();\r\n  const standartMatchPrice = await getStandartMatchPrice();\r\n  let payments = [];\r\n  let matchPrice = standartMatchPrice;\r\n  let unrealezedPrize = 0;\r\n  allData.forEach((match) => {\r\n    //для каждого матча\r\n    let vinners = [];\r\n    match.usersStakes.forEach((stake) => {\r\n      console.log(stake.username);\r\n      //для каждой ставки считаем победителей\r\n      if (\r\n        backendService.calcPets(\r\n          stake.home,\r\n          stake.away,\r\n          match.home,\r\n          match.away\r\n        ) === 5\r\n      ) {\r\n        vinners.push({ userId: stake.userId });\r\n        console.log(stake.username + \" \" + match.matchNo + \"  \" + vinners);\r\n      }\r\n    });\r\n    if (vinners.length === 0) {\r\n      unrealezedPrize = unrealezedPrize + standartMatchPrice;\r\n      matchPrice = 0;\r\n    } else {\r\n      matchPrice = standartMatchPrice + unrealezedPrize;\r\n      unrealezedPrize = 0;\r\n    }\r\n    let money =\r\n      vinners.length > 0\r\n        ? (match.coefficient * matchPrice) / vinners.length\r\n        : 0;\r\n    payments.push({ matchNo: match.matchNo, vinners: vinners, money: money });\r\n  });\r\n  payments.forEach((match) => {\r\n    //не обнуляет если не победитель\r\n    match.vinners.forEach((vin) => {\r\n      backendService.setMoneyByUserId(vin.userId, {\r\n        matchNo: match.matchNo,\r\n        money: match.money,\r\n      });\r\n    });\r\n  });\r\n  console.log(payments);\r\n  return \"done\";\r\n};\r\n\r\nconst authHeader = () => {\r\n  // return authorization header with basic auth credentials\r\n  const user = JSON.parse(localStorage.getItem(\"user\"));\r\n  return user && user.authdata\r\n    ? {\r\n        Authorization: \"Basic \" + user.authdata,\r\n        \"Content-Type\": \"application/json\",\r\n      }\r\n    : {};\r\n};\r\n\r\nconst logout = () => localStorage.removeItem(\"user\");\r\n\r\nconst handleResponse = async (response) => {\r\n  const data = await response.json();\r\n  //const data = text && JSON.parse(text)\r\n  if (!response.ok) {\r\n    if (response.status === 401) {\r\n      // auto logout if 401 response returned from api\r\n      logout();\r\n      window.location.reload(true); //добавил window\r\n    }\r\n    return Promise.reject((data && data.message) || response.statusText);\r\n  }\r\n  return data;\r\n};\r\n\r\nconst request = async (url, method, requestOptions) =>\r\n  await handleResponse(\r\n    await fetch(`${backendHost}/${url}`, {\r\n      method: method,\r\n      headers: authHeader(),\r\n      ...(requestOptions ? requestOptions : {}),\r\n    })\r\n  );\r\n\r\nconst requestObj = {\r\n  get: async (url, requestOptions) => await request(url, \"GET\", requestOptions),\r\n  post: async (url, requestOptions) =>\r\n    await request(url, \"POST\", requestOptions),\r\n  put: async (url, requestOptions) => await request(url, \"PUT\", requestOptions),\r\n  delete: async (url, requestOptions) =>\r\n    await request(url, \"DELETE\", requestOptions),\r\n};\r\n\r\n// let requestObj = {};\r\n// \"GET,POST,PUT,DELETE\".split(\",\").forEach(\r\n//   (item) =>\r\n//     (requestObj = {\r\n//       ...requestObj,\r\n//       [item.toLowerCase()]: async (url, requestOptions) =>\r\n//         await request(url, item, requestOptions),\r\n//     })\r\n// );\r\n\r\nexport const backendService = {\r\n  login: async (username, password) => {\r\n    const user = await requestObj.post(`users/authenticate`, {\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({ username, password }),\r\n    });\r\n    if (user) {\r\n      user.authdata = window.btoa(username + \":\" + password);\r\n      localStorage.setItem(\"user\", JSON.stringify(user));\r\n    }\r\n    return user;\r\n  },\r\n  logout: logout,\r\n  updateOne: async (type, obj) =>\r\n    await requestObj.put(`${type}/${obj._id}`, {\r\n      body: JSON.stringify({ ...obj }),\r\n    }),\r\n  addOne: async (type, obj) =>\r\n    await requestObj.post(type, { body: JSON.stringify({ ...obj }) }),\r\n  deleteOne: async (type, id) => requestObj.delete(`${type}/${id}`),\r\n  getAll: async (type) => await requestObj.get(type),\r\n  getStakesByUserId: async (id) => await requestObj.get(`users/${id}/stakes`),\r\n  setStakesByUserId: async (id, stake) =>\r\n    await requestObj.put(`users/${id}/stakes/${stake.matchNo}`, {\r\n      body: JSON.stringify({ ...stake }),\r\n    }),\r\n  setMoneyByUserId: async (id, stake) =>\r\n    await requestObj.put(`users/${id}/money/${stake.matchNo}`, {\r\n      body: JSON.stringify({ ...stake }),\r\n    }),\r\n  teams,\r\n  calcPets,\r\n  calcMoney,\r\n  zeroingMoney,\r\n  getSortedMatches,\r\n  setTestMatches,\r\n  setTestStakes,\r\n};\r\n\r\n//   const allData = users.flatMap(user => {\r\n//     let allDataRows =[];\r\n//     sortedMatches.forEach((match, index) => {\r\n//       let allDataRow;\r\n//       if ((match.matchNo === user.stakes[index].matchNo) && !match.enable){\r\n//         allDataRow = user.stakes[index];\r\n//         allDataRow.userId = user._id;\r\n//         if (user.stakes[index].home == null || user.stakes[index].away == null){ //сделал ли пользователь ставку в закрытой области\r\n//           // user.stakes[index].home = 10;\r\n//           // user.stakes[index].away = 10;\r\n//           allDataRow.home = 10;\r\n//           allDataRow.away = 10;\r\n//         }\r\n//         else{\r\n//           // user.stakes[index].realHome = match.home;\r\n//           // user.stakes[index].realAway = match.away;\r\n//           allDataRow.realHome = match.home;\r\n//           allDataRow.realAway = match.away;\r\n//         }\r\n//         //user.stakes[index].passed = true;\r\n//         allDataRow.password =true;\r\n//         allDataRows.push(allDataRow);\r\n//         //console.log(index +\" \"+user.username +\" \"+match.matchNo+\" \"+match.home+\" \"+match.away+\" \"+user.stakes[index].home+\" \"+user.stakes[index].away)\r\n//       }\r\n//      })\r\n//     return allDataRows;\r\n//    })\r\n//    return allData;\r\n// };\r\n\r\n// const localBackendHost = \"http://localhost:4000\";\r\n// const cloudBackendHost = \"http://node-euro-2021.appspot.com\";\r\n// const teams = {\r\n//   Бельгия: \"Бельгия\",\r\n//   Италия: \"Италия\",\r\n//   Россия: \"Россия\",\r\n//   Финляндия: \"Финляндия\",\r\n//   Франция: \"Франция\",\r\n//   Польша: \"Польша\",\r\n//   Украина: \"Украина\",\r\n//   Испания: \"Испания\",\r\n//   Турция: \"Турция\",\r\n//   Англия: \"Англия\",\r\n//   Чехия: \"Чехия\",\r\n//   Швеция: \"Швеция\",\r\n//   Нидерланды: \"Нидерланды\",\r\n//   Германия: \"Германия\",\r\n//   Хорватия: \"Хорватия\",\r\n//   Австрия: \"Австрия\",\r\n//   Португалия: \"Португалия\",\r\n//   Швейцария: \"Швейцария\",\r\n//   Дания: \"Дания\",\r\n//   Уэльс: \"Уэльс\",\r\n// };\r\n\r\n// const backendHost = localBackendHost;\r\n\r\n// const calcPets = ( home, away, realHome, realAway) => {\r\n//   if(home===null || away === null || realHome ===null || realAway === null) return 0;\r\n//   let difference = home - away;\r\n//   let realDifference = realHome - realAway;\r\n//   if (home === realHome && away === realAway) {\r\n//     return 5;\r\n//   } else if (difference === realDifference) {\r\n//     return 3;\r\n//   } else if (\r\n//     (difference > 0 && realDifference > 0) ||\r\n//     (difference < 0 && realDifference < 0) ||\r\n//     (difference === 0 && realDifference === 0)\r\n//   ) {\r\n//     return 1;\r\n//   } else return 0;\r\n// }\r\n\r\n// const authHeader = () => {\r\n//   // return authorization header with basic auth credentials\r\n//   let user = JSON.parse(localStorage.getItem(\"user\"));\r\n\r\n//   if (user && user.authdata) {\r\n//     return {\r\n//       Authorization: \"Basic \" + user.authdata,\r\n//       \"Content-Type\": \"application/json\",\r\n//     };\r\n//   } else {\r\n//     return {};\r\n//   }\r\n// }\r\n\r\n//  const login = async (username, password) => {\r\n//   const requestOptions = {\r\n//     method: \"POST\",\r\n//     headers: { \"Content-Type\": \"application/json\" },\r\n//     body: JSON.stringify({ username, password }),\r\n//   };\r\n\r\n//   const response = await fetch(`${backendHost}/users/authenticate`, requestOptions);\r\n//   const user = await handleResponse(response);\r\n//   // login successful if there's a user in the response\r\n//   if (user) {\r\n//     // store user details and basic auth credentials in local storage\r\n//     // to keep user logged in between page refreshes\r\n//     user.authdata = window.btoa(username + \":\" + password);\r\n//     localStorage.setItem(\"user\", JSON.stringify(user));\r\n//   }\r\n//   return user;\r\n// }\r\n\r\n// const logout= ()=>{\r\n//   // remove user from local storage to log user out\r\n//   localStorage.removeItem(\"user\");\r\n// }\r\n\r\n//  const getAll = async (type) => {\r\n//   const requestOptions = {\r\n//     method: \"GET\",\r\n//     headers: authHeader(),\r\n//   };\r\n\r\n//   const response = await fetch(`${backendHost}/${type}`, requestOptions);\r\n//   return handleResponse(response);\r\n// }\r\n\r\n//  const addOne = async (type, obj) => {\r\n//   const requestOptions = {\r\n//     method: \"POST\",\r\n//     headers: authHeader(),\r\n//     body: JSON.stringify({...obj}),\r\n//   };\r\n\r\n//   const response = await fetch(`${backendHost}/${type}/`, requestOptions);\r\n//   return handleResponse(response);\r\n// }\r\n\r\n// const updateOne = async (type, obj) => {\r\n//   const requestOptions = {\r\n//     method: \"PUT\",\r\n//     headers: authHeader(),\r\n//     body: JSON.stringify({...obj}),\r\n//   };\r\n\r\n//   const response = await fetch(`${backendHost}/${type}/${obj._id}`, requestOptions);\r\n//   return handleResponse(response);\r\n// }\r\n\r\n//  const deleteOne = async (type, id) => {\r\n//   const requestOptions = {\r\n//     method: \"DELETE\",\r\n//     headers: authHeader(),\r\n//   };\r\n\r\n//   const response = await fetch(`${backendHost}/${type}/${id}`, requestOptions);\r\n//   return handleResponse(response);\r\n// }\r\n\r\n// const getStakesByUserId = async (id) => {\r\n//   const requestOptions = {\r\n//     method: \"GET\",\r\n//     headers: authHeader(),\r\n//   };\r\n\r\n//   const response = await fetch(`${backendHost}/users/${id}/stakes`, requestOptions);\r\n//   return handleResponse(response);\r\n// }\r\n\r\n//  const setStakesByUserId = async (id, stake) => {\r\n//   const requestOptions = {\r\n//     method: \"PUT\",\r\n//     headers: authHeader(),\r\n//     body: JSON.stringify({...stake}),\r\n//   };\r\n\r\n//   const response = await fetch(`${backendHost}/users/${id}/stakes/${stake.matchNo}`, requestOptions);\r\n//   return handleResponse(response);\r\n// }\r\n\r\n// const handleResponse = (response) => {\r\n//   return response.text().then((text) => {\r\n//     const data = text && JSON.parse(text);\r\n//     if (!response.ok) {\r\n//       if (response.status === 401) {\r\n//         // auto logout if 401 response returned from api\r\n//         logout();\r\n//         window.location.reload(true); //добавил window\r\n//       }\r\n\r\n//       const error = (data && data.message) || response.statusText;\r\n//       return Promise.reject(error);\r\n//     }\r\n//     return data;\r\n//   });\r\n// }\r\n\r\n// export const backendService = {\r\n//   login,\r\n//   logout,\r\n//   updateOne,\r\n//   addOne,\r\n//   deleteOne,\r\n//   getAll,\r\n//   getStakesByUserId,\r\n//   setStakesByUserId,\r\n//   teams,\r\n//   calcPets\r\n// };\r\n","import React, { useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Button, Menu, MenuItem } from \"@material-ui/core\";\r\n\r\nfunction MyMenu(props) {\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n\r\n  const handleClick = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button\r\n        aria-controls=\"simple-menu\"\r\n        aria-haspopup=\"true\"\r\n        onClick={handleClick}\r\n      >\r\n        МЕНЮ\r\n      </Button>\r\n      <Menu\r\n        id=\"simple-menu\"\r\n        anchorEl={anchorEl}\r\n        keepMounted\r\n        open={Boolean(anchorEl)}\r\n        onClose={handleClose}\r\n      >\r\n        <MenuItem>\r\n          {\" \"}\r\n          <Link to=\"/\">Домашняя страница</Link>\r\n        </MenuItem>\r\n        <MenuItem onClick={handleClose}>\r\n          <Link to=\"/result\">Результаты</Link>\r\n        </MenuItem>\r\n        <MenuItem onClick={handleClose}>\r\n          <Link to=\"/info\">Информация</Link>\r\n        </MenuItem>\r\n        {props.currentUser.isAdmin && (\r\n          <MenuItem onClick={handleClose}>\r\n            <Link to=\"/admin\">Администрирование</Link>\r\n          </MenuItem>          \r\n        )}\r\n        {props.currentUser.isAdmin && (\r\n          <MenuItem onClick={handleClose}>\r\n            <Link to=\"/test\">Тестирование</Link>\r\n          </MenuItem>          \r\n        )}        \r\n        <MenuItem onClick={handleClose}>\r\n          <Link to=\"/login\">Выйти</Link>\r\n        </MenuItem>\r\n      </Menu>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport { MyMenu };\r\n","import React, { useState, useEffect } from \"react\";\r\nimport MaterialTable from \"material-table\";\r\nimport { backendService } from \"./backend.service\";\r\nimport {MyMenu} from \"./MyMenu\";\r\nimport { CircularProgress } from \"@material-ui/core\";\r\n\r\nfunction HomePage() {\r\n  const [currentUser, setCurrentUser] = useState({});\r\n  const [stakes, setStakes] = useState({ loading: true });\r\n  const [matches, setMatches] = useState({ loading: true });\r\n\r\n  const columns = [\r\n    { title: \"_id\", field: \"_id\", hidden: true },\r\n    {\r\n      title: \"№\",\r\n      field: \"matchNo\",\r\n      editable: \"never\",\r\n      //      customSort: (a, b) =>( a.matchNo - b.matchNo ),\r\n      defaultSort: \"asc\",\r\n    },\r\n    {\r\n      title: \"Home\",\r\n      field: \"homeName\",\r\n      lookup: backendService.teams,\r\n      editable: \"never\",\r\n    },\r\n    { title: \"Score\", field: \"home\", type: \"numeric\" },\r\n    {\r\n      title: \"Away\",\r\n      field: \"awayName\",\r\n      lookup: backendService.teams,\r\n      editable: \"never\",\r\n    },\r\n    { title: \"Score\", field: \"away\", type: \"numeric\" },\r\n    {\r\n      title: \"Coefficient\",\r\n      field: \"coefficient\",\r\n      type: \"numeric\",\r\n      editable: \"never\",\r\n    },\r\n    { title: \"Enable\", field: \"enable\", type: \"boolean\", editable: \"never\" },\r\n    {\r\n      title: \"Pets\",\r\n      field: \"pets\",\r\n      editable: \"never\"\r\n    },\r\n    {\r\n      title: \"Money\",\r\n      field: \"money\",\r\n      editable: \"never\"\r\n    },\r\n    //  { title: \"MySk\", render: rowData => <div>Матч {rowData.homeName} - {rowData.awayName} сыгран, счёт {rowData.realHome} : {rowData.realAway}</div>},\r\n    // { title: \"Pets\", field: \"pets\", type: \"numeric\",  editable: \"never\" }\r\n    // {\r\n    //   title: \"Pets\",\r\n    //   render: (rowData) => (\r\n    //     <div\r\n    //       style={{ backgroundColor: rowData[\"pets\"] === 5 ? \"red\" : rowData[\"pets\"] === 3 ? \"yellow\" : rowData[\"pets\"] === 1? \"green\" : \"white\"  }}\r\n    //     >\r\n    //       {rowData.pets}{\" \"}\r\n    //     </div>\r\n    //   ),\r\n    // },\r\n  ];\r\n\r\n  useEffect(() => {\r\n    const user = JSON.parse(localStorage.getItem(\"user\"));\r\n    setCurrentUser(user);\r\n    backendService\r\n      .getStakesByUserId(user._id)\r\n      .then((stakes) => setStakes(stakes));\r\n    backendService.getAll(\"matches\").then((matches) => setMatches(matches));\r\n  }, []);\r\n\r\n  const getMergedArray = (stakesArr, matchesArr) => {\r\n    return matchesArr.map((match) => {\r\n      let stake = stakesArr.find((item) => item.matchNo === match.matchNo);\r\n      if (stake !== undefined && match.matchNo === stake.matchNo) {\r\n        let temp = Object.assign({}, match); //может можно без копирования объекта\r\n        temp.home = stake.home;\r\n        temp.away = stake.away;\r\n        temp.realHome = match.home;\r\n        temp.realAway = match.away;\r\n        temp.pets = backendService.calcPets(\r\n          temp.home,\r\n          temp.away,\r\n          temp.realHome,\r\n          temp.realAway\r\n        );\r\n         temp.money = stake.money;\r\n      // temp.money = backendService.calcMoney(0,1)\r\n        return (match = temp);\r\n      } else {\r\n        return match;\r\n      }\r\n    });\r\n  };\r\n\r\n  if (matches.loading || stakes.loading)\r\n    return <div><CircularProgress/> </div>;\r\n\r\n  return (\r\n    <div>\r\n      <MyMenu currentUser = {currentUser} />\r\n      <MaterialTable\r\n        options={{\r\n          pageSize: 10,\r\n          pageSizeOptions: [10, 51],\r\n          sorting: true,\r\n          rowStyle: (rowData) => {\r\n            if (rowData.pets === 5) {\r\n              return { backgroundColor: \"#C9B037\" }; //gold\r\n            } else if (rowData.pets === 3) {\r\n              return { backgroundColor: \"#B4B4B4\" }; //silver\r\n            } else if (rowData.pets === 1) {\r\n              return { backgroundColor: \"#AD8A56\" }; //bronze\r\n            }\r\n          },\r\n        }}\r\n        title={`Это домашняя страница, тут нужно делать ставки, ${currentUser.username}, для этого воспользуйся пиктограммой карандаша в строке, которую хочешь исправить`}\r\n        columns={columns}\r\n        data={getMergedArray(stakes, matches)}\r\n        detailPanel={(rowData) => {\r\n          if (rowData.enable === false) {\r\n            return (\r\n              <div>\r\n                Матч {rowData.homeName} - {rowData.awayName} сыгран, счёт{\" \"}\r\n                {rowData.realHome} : {rowData.realAway}\r\n              </div>\r\n            );\r\n          }\r\n        }}\r\n        editable={{\r\n          isEditable: (rowData) => rowData.enable === true,\r\n          onRowUpdate: (newData, oldData) =>\r\n            backendService\r\n              .setStakesByUserId(currentUser._id, {\r\n                // matchNo: newData.matchNo,\r\n                // home: newData.home,\r\n                // away: newData.away,\r\n                ...newData,\r\n              })\r\n              .then((data) => {\r\n                setStakes((stakes) =>\r\n                  stakes.map((item) => {\r\n                    let updatedStake = data.stakes.find(\r\n                      (st) => st.matchNo === newData.matchNo\r\n                    );\r\n                    if (item.matchNo === updatedStake.matchNo) {\r\n                      let temp = Object.assign({}, item);\r\n                      temp.home = updatedStake.home;\r\n                      temp.away = updatedStake.away;\r\n                      return (item = temp);\r\n                    } else {\r\n                      return item;\r\n                    }\r\n                  })\r\n                );\r\n              }),\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n}\r\nexport { HomePage };\r\n","import React, { useState } from \"react\";\r\nimport { backendService } from \"./backend.service\";\r\nimport { Alert, AlertTitle } from \"@material-ui/lab\";\r\nimport { CircularProgress } from \"@material-ui/core\";\r\nimport {\r\n  Visibility,\r\n  VisibilityOff,\r\n} from \"@material-ui/icons\";\r\nimport {\r\n  Button,\r\n  Grid,\r\n  Typography,\r\n  Input,\r\n  InputLabel,\r\n  IconButton,\r\n  InputAdornment,\r\n  FormControl,\r\n} from \"@material-ui/core\";\r\n\r\nlet crypto = require(\"crypto\");\r\n\r\nconst LoginPage = (props) => {\r\n  backendService.logout();\r\n  const [state, setState] = useState({\r\n    username: \"\",\r\n    password: \"\",\r\n    error: \"\",\r\n    loading: false,\r\n    submitted: false,\r\n    showPassword: false\r\n  });\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setState((state) => ({ ...state, [name]: value }));\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    setState((state) => ({ ...state, submitted: true }));\r\n    const { username, password } = state;\r\n\r\n    // stop here if form is invalid\r\n    if (!(username && password)) {\r\n      return;\r\n    }\r\n\r\n    setState((state) => ({ ...state, loading: true }));\r\n    backendService\r\n      .login(\r\n        username,\r\n        crypto.createHash(\"sha256\").update(password).digest(\"base64\")\r\n      )\r\n      .then(\r\n        () => {\r\n          const { from } = props.location.state || {\r\n            from: { pathname: \"/\" },\r\n          };\r\n          props.history.push(from);\r\n        },\r\n        (error) => {\r\n          setState((state) => ({ ...state, error: error, loading: false }));\r\n        }\r\n      );\r\n  };\r\n\r\n  const handleClickShowPassword = (sp) => {\r\n    setState((state) => ({ ...state, showPassword: sp }));\r\n };\r\n\r\n const handleMouseDownPassword = (event) => {\r\n   event.preventDefault();\r\n };\r\n // добавить Alert вместо div и ShowPassword\r\n  return (\r\n    <Grid container>\r\n      <Grid item>\r\n        <Typography variant=\"h3\" gutterBottom>\r\n          Login:\r\n        </Typography>\r\n      </Grid>\r\n\r\n        <Grid container>\r\n          <FormControl>\r\n            <InputLabel htmlFor=\"username\">Username</InputLabel>\r\n            <Input\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              name=\"username\"\r\n              value={state.username}\r\n              onChange={handleChange}\r\n            />\r\n            {state.submitted && !state.username && (\r\n                      <Alert severity=\"warning\">\r\n                      <AlertTitle>Username is required</AlertTitle>\r\n                    </Alert>\r\n            )}\r\n          </FormControl>\r\n          <FormControl>\r\n            <InputLabel htmlFor=\"password\">Password</InputLabel>\r\n            <Input\r\n              type={state.showPassword ? \"text\" : \"password\"}\r\n              className=\"form-control\"\r\n              name=\"password\"\r\n              value={state.password}\r\n              onChange={handleChange}\r\n              endAdornment={\r\n                <InputAdornment position=\"end\">\r\n                  <IconButton\r\n                    onClick={() => handleClickShowPassword(!state.showPassword)}\r\n                    onMouseDown={handleMouseDownPassword}\r\n                  >\r\n                    {state.showPassword ? (\r\n                      <Visibility />\r\n                    ) : (\r\n                      <VisibilityOff />\r\n                    )}\r\n                  </IconButton>\r\n                </InputAdornment>\r\n              }\r\n            />\r\n            {state.submitted && !state.password && (\r\n                      <Alert severity=\"warning\">\r\n                      <AlertTitle>Password is required</AlertTitle>\r\n                    </Alert>\r\n            )}\r\n          </FormControl>\r\n        </Grid>\r\n\r\n        <Grid item>\r\n          <Button type=\"submit\" variant=\"contained\" disabled={state.loading} onClick={handleSubmit}>\r\n            Login\r\n          </Button>\r\n          {state.loading && (\r\n            <CircularProgress/> \r\n          )}\r\n            {state.error && (\r\n            <Alert severity=\"error\">\r\n              <AlertTitle> {state.error}</AlertTitle>\r\n            </Alert>\r\n          )}\r\n        </Grid>\r\n      \r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport { LoginPage };\r\n\r\n// import React, { useState, useEffect } from \"react\";\r\n// import { backendService } from \"./backend.service\";\r\n\r\n// let crypto = require('crypto');\r\n\r\n// class LoginPage extends React.Component {\r\n//   constructor(props) {\r\n//     super(props);\r\n\r\n//     backendService.logout();\r\n\r\n//     this.state = {\r\n//       username: \"\",\r\n//       password: \"\",\r\n//       submitted: false,\r\n//       loading: false,\r\n//       error: \"\",\r\n//     };\r\n\r\n//     this.handleChange = this.handleChange.bind(this);\r\n//     this.handleSubmit = this.handleSubmit.bind(this);\r\n//   }\r\n\r\n//   handleChange(e) {\r\n//     const { name, value } = e.target;\r\n//     this.setState({ [name]: value });\r\n//   }\r\n\r\n//   handleSubmit(e) {\r\n//     e.preventDefault();\r\n\r\n//     this.setState({ submitted: true });\r\n//     const { username, password, returnUrl } = this.state;\r\n\r\n//     // stop here if form is invalid\r\n//     if (!(username && password)) {\r\n//       return;\r\n//     }\r\n\r\n//     this.setState({ loading: true });\r\n//     backendService.login(username, crypto.createHash('sha256').update(password).digest('base64')).then(\r\n//       (user) => {\r\n//         const { from } = this.props.location.state || {\r\n//           from: { pathname: \"/\" },\r\n//         };\r\n//         this.props.history.push(from);\r\n//       },\r\n//       (error) => this.setState({ error, loading: false })\r\n//     );\r\n//   }\r\n\r\n//   render() {\r\n//     const { username, password, submitted, loading, error } = this.state;\r\n//     return (\r\n//       <div className=\"col-md-6 col-md-offset-3\">\r\n//         <div className=\"alert alert-info\">\r\n//           Username: test\r\n//           <br />\r\n//           Password: test\r\n//         </div>\r\n//         <h2>Login</h2>\r\n//         <form name=\"form\" onSubmit={this.handleSubmit}>\r\n//           <div\r\n//             className={\r\n//               \"form-group\" + (submitted && !username ? \" has-error\" : \"\")\r\n//             }\r\n//           >\r\n//             <label htmlFor=\"username\">Username</label>\r\n//             <input\r\n//               type=\"text\"\r\n//               className=\"form-control\"\r\n//               name=\"username\"\r\n//               value={username}\r\n//               onChange={this.handleChange}\r\n//             />\r\n//             {submitted && !username && (\r\n//               <div className=\"help-block\">Username is required</div>\r\n//             )}\r\n//           </div>\r\n//           <div\r\n//             className={\r\n//               \"form-group\" + (submitted && !password ? \" has-error\" : \"\")\r\n//             }\r\n//           >\r\n//             <label htmlFor=\"password\">Password</label>\r\n//             <input\r\n//               type=\"password\"\r\n//               className=\"form-control\"\r\n//               name=\"password\"\r\n//               value={password}\r\n//               onChange={this.handleChange}\r\n//             />\r\n//             {submitted && !password && (\r\n//               <div className=\"help-block\">Password is required</div>\r\n//             )}\r\n//           </div>\r\n//           <div className=\"form-group\">\r\n//             <button className=\"btn btn-primary\" disabled={loading}>\r\n//               Login\r\n//             </button>\r\n//             {loading && (\r\n//               <img src=\"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==\" />\r\n//             )}\r\n//           </div>\r\n//           {error && <div className={\"alert alert-danger\"}>{error}</div>}\r\n//         </form>\r\n//       </div>\r\n//     );\r\n//   }\r\n// }\r\n\r\n// export { LoginPage };\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { backendService } from \"./backend.service\";\r\nimport { Alert, AlertTitle } from \"@material-ui/lab\";\r\nimport {\r\n  Visibility,\r\n  VisibilityOff,\r\n  Save,\r\n  Delete,\r\n  Add,\r\n  CloudUpload\r\n} from \"@material-ui/icons\";\r\nimport {\r\n  Checkbox,\r\n  Button,\r\n  Grid,\r\n  Typography,\r\n  Input,\r\n  InputLabel,\r\n  IconButton,\r\n  InputAdornment,\r\n  TextField,\r\n  FormControl,\r\n  Fab,\r\n  CircularProgress,\r\n} from \"@material-ui/core\";\r\nimport { MyMenu } from \"./MyMenu\";\r\n\r\nconst crypto = require(\"crypto\");\r\n\r\nfunction AdminPage() {\r\n  const [currentUser, setCurrentUser] = useState({});\r\n  const [newUser, setNewUser] = useState(\"\");\r\n  const [users, setUsers] = useState({ loading: true });\r\n  const [answer, setAnswer] = useState(false);\r\n\r\n  useEffect(() => {\r\n    let clean = false;\r\n    setCurrentUser(JSON.parse(localStorage.getItem(\"user\")));\r\n    backendService.getAll(\"users\").then((users) => {\r\n      //это чтобы избежать рендера на не существующих объектах\r\n      if (!clean) {\r\n        setUsers(\r\n          users.map((item) => ({\r\n            ...item,\r\n            passwordChanged: false,\r\n            showPassword: false,\r\n          }))\r\n        );\r\n      }\r\n    });\r\n    return () => (clean = true);\r\n  }, []);\r\n\r\n  const handleAddItem = () => {\r\n    backendService\r\n      .addOne(\"users\", { username: newUser.username })\r\n      .then((newUser) => {\r\n        setUsers((users) => users.concat(newUser));\r\n        setAnswer(\r\n          JSON.parse(`{\"message\":\"User ${newUser.username} has been added\"}`)\r\n        );\r\n        setNewUser({ username: \"\" });\r\n      });\r\n  };\r\n\r\n  const handleChangeNewUserName = (event) => {\r\n    setNewUser({ username: event.target.value });\r\n  };\r\n\r\n  const handleDeleteUser = (id) => {\r\n    backendService\r\n      .deleteOne(\"users\", id)\r\n      .then(setUsers((users) => users.filter((item) => item._id !== id)))\r\n      .then((ans) => setAnswer(ans));\r\n  };\r\n\r\n  const handleSaveUser = (id) => {\r\n    const foundUser = { ...users.find((item) => item._id === id) };\r\n    backendService\r\n      .updateOne(\"users\", {\r\n        ...foundUser,\r\n        password: foundUser.passwordChanged\r\n          ? crypto\r\n              .createHash(\"sha256\")\r\n              .update(foundUser.password)\r\n              .digest(\"base64\")\r\n          : foundUser.password,\r\n      })\r\n      .then((data) => {\r\n        setUsers(\r\n          users.map((item) => (item._id === data._id ? (item = data) : item))\r\n        );\r\n        setAnswer(\r\n          JSON.parse(`{\"message\":\"User ${data.username} has been changed\"}`)\r\n        );\r\n      });\r\n  };\r\n\r\n  // const handleChangeField = (event) => {\r\n  //   let value = event.target.value\r\n  //   const { name, id } = event.target\r\n  //   if (name === 'isAdmin') {\r\n  //     value = event.target.checked\r\n  //   }\r\n  //   setUsers(users.map((item) => ({ ...item, name: item._id === id ? value : name })))\r\n  // }\r\n\r\n  const handleChangeField = (e) => {\r\n    let { name, value, id } = e.target;\r\n    if (name === \"isAdmin\") {\r\n      value = e.target.checked;\r\n    }\r\n    setUsers((users) =>\r\n      users.map((item) => {\r\n        if (item._id === id) {\r\n          let temp = Object.assign({}, item);\r\n          temp[name] = value;\r\n          if (name === \"password\") temp.passwordChanged = true;\r\n          return (item = temp);\r\n        } else {\r\n          return item;\r\n        }\r\n      })\r\n    );\r\n  };\r\n\r\n  const handleClickShowPassword = (id) => {\r\n    setUsers(\r\n      users.map((item) => ({\r\n        ...item,\r\n        showPassword: item._id === id ? !item.showPassword : item.showPassword,\r\n      }))\r\n    );\r\n  };\r\n\r\n  const handleMouseDownPassword = (event) => {\r\n    event.preventDefault();\r\n  };\r\n\r\n  const handleUpdateMoney= () => {\r\n    backendService.calcMoney().then(data => setAnswer(JSON.parse(`{\"message\":\"Update ${data}\"}`)));\r\n  }\r\n  \r\n  const handleZeroingMoney= () => {\r\n    backendService.zeroingMoney().then(data => setAnswer(JSON.parse(`{\"message\":\"Zeroing ${data}\"}`)));\r\n  }\r\n\r\n  //тут можно модную крутилку добавить CircularProgress или еще чего.\r\n  if (users.loading) return <div><CircularProgress/></div>;\r\n\r\n  if (currentUser.isAdmin) {\r\n    return (\r\n      <Grid container>\r\n        <Grid item>\r\n          <MyMenu currentUser={currentUser} />\r\n        </Grid>\r\n        <Grid item>\r\n          <Typography variant=\"h3\" gutterBottom>\r\n            Users control panel: {currentUser.username}\r\n          </Typography>\r\n        </Grid>\r\n        {users.length && (\r\n          <Grid container>\r\n            {users.map((user, index) => (\r\n              <Grid item key={user._id}>\r\n                <TextField\r\n                  type=\"text_u\"\r\n                  label=\"Username\"\r\n                  id={user._id}\r\n                  name=\"username\"\r\n                  defaultValue={user.username}\r\n                  onChange={handleChangeField}\r\n                />\r\n                <FormControl>\r\n                  <InputLabel htmlFor=\"standard-adornment-password\">\r\n                    Password\r\n                  </InputLabel>\r\n                  <Input\r\n                    id={user._id}\r\n                    type={user.showPassword ? \"text\" : \"password\"}\r\n                    name=\"password\"\r\n                    //                    defaultValue={user.password}\r\n                    onChange={handleChangeField}\r\n                    endAdornment={\r\n                      <InputAdornment position=\"end\">\r\n                        <IconButton\r\n                          onClick={() => handleClickShowPassword(user._id)}\r\n                          onMouseDown={handleMouseDownPassword}\r\n                        >\r\n                          {user.showPassword ? (\r\n                            <Visibility />\r\n                          ) : (\r\n                            <VisibilityOff />\r\n                          )}\r\n                        </IconButton>\r\n                      </InputAdornment>\r\n                    }\r\n                  />\r\n                </FormControl>\r\n                <TextField\r\n                  type=\"text_f\"\r\n                  label=\"First name\"\r\n                  id={user._id}\r\n                  name=\"firstName\"\r\n                  defaultValue={user.firstName}\r\n                  onChange={handleChangeField}\r\n                />\r\n                <TextField\r\n                  type=\"text_l\"\r\n                  label=\"Last name\"\r\n                  id={user._id}\r\n                  name=\"lastName\"\r\n                  defaultValue={user.lastName}\r\n                  onChange={handleChangeField}\r\n                />\r\n                <TextField\r\n                  type=\"text_e\"\r\n                  label=\"Email\"\r\n                  id={user._id}\r\n                  name=\"email\"\r\n                  defaultValue={user.email}\r\n                  onChange={handleChangeField}\r\n                />\r\n                <Checkbox\r\n                  type=\"checkbox\"\r\n                  id={user._id}\r\n                  name=\"isAdmin\"\r\n                  defaultChecked={user.isAdmin}\r\n                  onClick={handleChangeField}\r\n                />\r\n                <Button\r\n                  type=\"button\"\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  onClick={() => handleSaveUser(user._id)}\r\n                  startIcon={<Save />}\r\n                >\r\n                  {\" \"}\r\n                  Save{\" \"}\r\n                </Button>\r\n                <Button\r\n                  type=\"button\"\r\n                  variant=\"contained\"\r\n                  onClick={() => handleDeleteUser(user._id)}\r\n                  startIcon={<Delete />}\r\n                >\r\n                  {\" \"}\r\n                  Delete{\" \"}\r\n                </Button>\r\n                <br />\r\n                <br />\r\n              </Grid>\r\n            ))}\r\n          </Grid>\r\n        )}\r\n        <Grid item>\r\n          <TextField\r\n            type=\"text_ a\"\r\n            onChange={handleChangeNewUserName}\r\n            value={newUser.username}\r\n          />\r\n          <Fab\r\n            color=\"primary\"\r\n            aria-label=\"add\"\r\n            onClick={handleAddItem}\r\n            disabled={!newUser}\r\n          >\r\n            <Add />\r\n          </Fab>\r\n          <br />\r\n          <br />\r\n          {answer && (\r\n            <Alert severity=\"success\">\r\n              <AlertTitle> {answer.message}</AlertTitle>\r\n            </Alert>\r\n          )}\r\n        </Grid>\r\n        <Grid container>\r\n            <Grid item>\r\n              <Button\r\n                    type=\"button\"\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    onClick={handleUpdateMoney}\r\n                    startIcon={<CloudUpload />}\r\n                  >\r\n                    {\" \"}\r\n                    Обновить суммы{\" \"}\r\n                  </Button>\r\n            </Grid>\r\n            <Grid item>\r\n              <Button\r\n                    type=\"button\"\r\n                    variant=\"contained\"\r\n                    color=\"default\"\r\n                    onClick={handleZeroingMoney}\r\n                    startIcon={<Delete />}\r\n                  >\r\n                    {\" \"}\r\n                    Обнулить суммы{\" \"}\r\n                  </Button>\r\n            </Grid>\r\n          </Grid>\r\n      </Grid>\r\n    );\r\n  } else\r\n    return (\r\n      <div>\r\n        <h1>Access denied</h1>\r\n      </div>\r\n    );\r\n}\r\n\r\nexport { AdminPage };\r\n","import React, { useState, useEffect } from \"react\";\r\nimport MaterialTable from \"material-table\";\r\nimport { backendService } from \"./backend.service\";\r\nimport { MyMenu } from \"./MyMenu\";\r\nimport { CircularProgress } from \"@material-ui/core\";\r\n\r\nfunction InfoPage() {\r\n  const [currentUser, setCurrentUser] = useState({});\r\n  const [matches, setMatches] = useState({ loading: true });\r\n\r\n  const columns = [\r\n    { title: \"_id\", field: \"_id\", hidden: true },\r\n    { title: \"№\", field: \"matchNo\", defaultSort: \"asc\" },\r\n    { title: \"Home\", field: \"homeName\", lookup: backendService.teams },\r\n    { title: \"Score\", field: \"home\", type: \"numeric\" },\r\n    { title: \"Away\", field: \"awayName\", lookup: backendService.teams },\r\n    { title: \"Score\", field: \"away\", type: \"numeric\" },\r\n    { title: \"Coefficient\", field: \"coefficient\", type: \"numeric\" },\r\n    { title: \"Enable\", field: \"enable\", type: \"boolean\" },\r\n    { title: \"Visability\", field: \"visability\", type: \"boolean\" },\r\n  ];\r\n\r\n  useEffect(() => {\r\n    setCurrentUser(JSON.parse(localStorage.getItem(\"user\")));\r\n    backendService.getAll(\"matches\").then((matches) => setMatches(matches));\r\n  }, []);\r\n\r\n  if (matches.loading) return <div><CircularProgress/> </div>;\r\n\r\n  if (currentUser.isAdmin) {\r\n    return (\r\n      <div>\r\n        <MyMenu currentUser = {currentUser} />\r\n        <MaterialTable\r\n          options={{\r\n            pageSize: 10,\r\n            pageSizeOptions: [10, 51],\r\n          }}\r\n          title={`Информация о матчах, ${currentUser.username}`}\r\n          columns={columns}\r\n          data={matches}\r\n          editable={{\r\n            onRowAdd: (newData) =>\r\n              backendService\r\n                .addOne(\"matches\", {\r\n                  ...newData,\r\n                })\r\n                .then(setMatches((matches) => matches.concat(newData))),\r\n            onRowUpdate: (newData, oldData) =>\r\n              backendService\r\n                .updateOne(\"matches\", {\r\n                  ...newData,\r\n                })\r\n                .then((data) =>\r\n                  setMatches((matches) => matches.map((item) => (item._id === data._id ? data : item)))),\r\n            onRowDelete: (oldData) =>\r\n                  backendService\r\n                    .deleteOne(\"matches\", oldData._id)\r\n                    .then(setMatches((matches) => matches.filter((item) => item._id !== oldData._id)))\r\n          }}\r\n        />\r\n      </div>\r\n    );\r\n  } else\r\n    return (\r\n      <div>\r\n        <MyMenu currentUser = {currentUser} />\r\n        <MaterialTable\r\n          options={{\r\n            pageSize: 10,\r\n            pageSizeOptions: [10, 51],\r\n          }}\r\n          title={`${currentUser.username}, это наш эталон, реальный счёт, коэффициенты на матчи, их доступность для ставок и видимость собраны тут`}\r\n          columns={columns.slice(0, -2)}\r\n          data={matches}\r\n        />\r\n      </div>\r\n    );\r\n}\r\nexport { InfoPage };\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { CircularProgress } from \"@material-ui/core\";\r\nimport MaterialTable from \"material-table\";\r\nimport { backendService } from \"./backend.service\";\r\nimport { MyMenu } from \"./MyMenu\";\r\n\r\nfunction ResultPage() {\r\n  const [currentUser, setCurrentUser] = useState({});\r\n  const [columns, setColumns] = useState({ loading: true });\r\n  const [data, setData] = useState({ loading: true });\r\n\r\n  useEffect(() => {\r\n    setCurrentUser(JSON.parse(localStorage.getItem(\"user\")));\r\n\r\n    (async () => {\r\n      const users = await backendService.getAll(\"users\");\r\n      const matches = await backendService.getAll(\"matches\");\r\n      // const sortedMatches = matches.sort((a, b) => {\r\n      //   return a.matchNo - b.matchNo;\r\n      // });\r\n      const sortedMatches = backendService.getSortedMatches(matches);\r\n      const onlyMatches = sortedMatches.map((match, index) => {\r\n        let add =\r\n          match.home !== null && match.home !== undefined\r\n            ? `(${match.home}:${match.away})`\r\n            : \"\";\r\n        return {\r\n          title: `${match.homeName} - ${match.awayName} ${add}`,\r\n          field: `${match.matchNo}`,\r\n          render: (rowData) => (\r\n            <div\r\n              style={{\r\n                backgroundColor:\r\n                  rowData[`pets_${index + 1}`] === 5\r\n                    ? \"#C9B037\"\r\n                    : rowData[`pets_${index + 1}`] === 3\r\n                    ? \"#B4B4B4\"\r\n                    : rowData[`pets_${index + 1}`] === 1\r\n                    ? \"#AD8A56\"\r\n                    : \"white\",\r\n              }}\r\n            >\r\n              {rowData[index + 1]}\r\n            </div>\r\n          ),\r\n        };\r\n      });\r\n      const columns = [\r\n        { title: \"Пользователи\", field: \"user\" },\r\n        { title: \"Очки\", field: \"pets\" },\r\n        { title: \"Выйгрыш\", field: \"money\"}\r\n      ].concat(onlyMatches);\r\n      setColumns(columns);\r\n\r\n      const data = users.map((user) => {\r\n        let temp = Object.assign({}, user);\r\n        temp.user = user.username;\r\n        temp.pets = 0;\r\n        temp.money = 0;\r\n        let money =0;\r\n        for (let i = 1; i < 52; i++) {\r\n          let match = user.stakes.find((item) => item.matchNo === i);\r\n          let realMatch = matches.find((item) => item.matchNo === i);\r\n          if (\r\n            match !== undefined &&\r\n            realMatch !== undefined &&\r\n            realMatch.visability === false\r\n          )\r\n            continue;\r\n          money = temp.stakes[i-1].money+money; \r\n          let moneyView = temp.stakes[i-1].money!==0?`; ${temp.stakes[i-1].money}₽`:'';\r\n          let pets =\r\n            match !== undefined && realMatch !== undefined\r\n              ? backendService.calcPets(\r\n                  match.home,\r\n                  match.away,\r\n                  realMatch.home,\r\n                  realMatch.away\r\n                )\r\n              : 0;\r\n          temp[i] =\r\n            match.home !== null && match.home !== undefined\r\n              ? `${match.home}:${match.away} (${pets}${moneyView})`\r\n              : \"\";\r\n          temp[`pets_${i}`] = pets;\r\n          temp.pets = temp.pets + pets;\r\n        }\r\n        temp.money = money;\r\n        return temp;\r\n      });\r\n      setData(data);\r\n    })();\r\n  }, []);\r\n\r\n  if (columns.loading || data.loading) return <div><CircularProgress/></div>;\r\n\r\n  return (\r\n    <div>\r\n      <MyMenu  currentUser = {currentUser} />\r\n      <MaterialTable\r\n        options={{\r\n          pageSize: 10,\r\n          pageSizeOptions: [10, 51],\r\n        }}\r\n        title={`Это общая таблица результатов, ${currentUser.username}, тут ничего не нужно редактировать, просто посмотри как справляются другие игроки`}\r\n        columns={columns}\r\n        data={data}\r\n      />\r\n    </div>\r\n  );\r\n}\r\nexport { ResultPage };\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { backendService } from \"./backend.service\";\r\nimport { Alert, AlertTitle } from \"@material-ui/lab\";\r\nimport { Add, Delete, CloudUpload } from \"@material-ui/icons\";\r\nimport {\r\n  Button,\r\n  Grid,\r\n  Typography,\r\n  TextField,\r\n  Fab,\r\n  CircularProgress,\r\n} from \"@material-ui/core\";\r\nimport { MyMenu } from \"./MyMenu\";\r\n\r\nfunction TestPage() {\r\n  const [currentUser, setCurrentUser] = useState({});\r\n  const [matches, setMatches] = useState(0);\r\n  const [stackes, setStackes]= useState(0);\r\n  const [answer, setAnswer] = useState(false);\r\n\r\n  useEffect(() => {\r\n    let clean = false;\r\n    setCurrentUser(JSON.parse(localStorage.getItem(\"user\")));\r\n    return () => (clean = true);\r\n  }, []);\r\n\r\n  const handleUpdateMoney = () => {\r\n    backendService\r\n      .calcMoney()\r\n      .then((data) => setAnswer(JSON.parse(`{\"message\":\"Update ${data}\"}`)));\r\n  };\r\n\r\n  const handleZeroingMoney = () => {\r\n    backendService\r\n      .zeroingMoney()\r\n      .then((data) => setAnswer(JSON.parse(`{\"message\":\"Zeroing ${data}\"}`)));\r\n  };\r\n\r\n  const handleChangeAddStakesData = (e) => {\r\n    setStackes(e.target.value);  \r\n  };\r\n\r\n  const handleAddStakesData = () => {\r\n    backendService.setTestStakes(stackes, false).then(data => setAnswer(JSON.parse(`{\"message\":\"setTestStakes ${data} ${stackes}\"}`)));\r\n  };\r\n\r\n  const handleChangeAddMatchesData = (e) => {\r\n    setMatches(e.target.value);\r\n  };\r\n\r\n  const handleAddMatchesData = () => {\r\n    backendService.setTestMatches(matches, false).then(data => setAnswer(JSON.parse(`{\"message\":\"setTestMatches ${data} ${matches}\"}`)));\r\n  };\r\n\r\n  const handleZeroingStakes = () => {\r\n    backendService.setTestStakes(stackes, true).then(data => setAnswer(JSON.parse(`{\"message\":\"zeroingTestStakes ${data} ${stackes}\"}`)));\r\n  };\r\n\r\n  const handleZeroingMatches = () => {\r\n    backendService.setTestMatches(matches, true).then(data => setAnswer(JSON.parse(`{\"message\":\"zeroingTestMatches ${data} ${matches}\"}`)));\r\n  };\r\n\r\n\r\n  //тут можно модную крутилку добавить CircularProgress или еще чего.\r\n  if (currentUser.loading)\r\n    return (\r\n      <div>\r\n        <CircularProgress />\r\n      </div>\r\n    );\r\n\r\n  if (currentUser.isAdmin) {\r\n    return (\r\n      <Grid container>\r\n        <Grid item>\r\n          <MyMenu currentUser={currentUser} />\r\n        </Grid>\r\n        <Grid item>\r\n          <Typography variant=\"h3\" gutterBottom>\r\n            Test panel: {currentUser.username}\r\n          </Typography>\r\n        </Grid>\r\n        <Grid container>\r\n          <Grid item>\r\n            <Button\r\n              type=\"button\"\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              onClick={handleUpdateMoney}\r\n              startIcon={<CloudUpload />}\r\n            >\r\n              {\" \"}\r\n              Обновить суммы{\" \"}\r\n            </Button>\r\n          </Grid>\r\n          <Grid item>\r\n            <Button\r\n              type=\"button\"\r\n              variant=\"contained\"\r\n              color=\"default\"\r\n              onClick={handleZeroingMoney}\r\n              startIcon={<Delete />}\r\n            >\r\n              {\" \"}\r\n              Обнулить суммы{\" \"}\r\n            </Button>\r\n          </Grid>\r\n        </Grid>\r\n        <br />\r\n        <br /> \r\n        <br />\r\n        <br />\r\n        <Grid container>\r\n          <Grid item>\r\n            <TextField\r\n              label=\"Stackes for every user\"\r\n              type=\"text\"\r\n              onChange={handleChangeAddStakesData}\r\n              value={stackes}\r\n            />\r\n            <Fab\r\n              color=\"primary\"\r\n              aria-label=\"add\"\r\n              onClick={handleAddStakesData}\r\n              disabled={false}\r\n            >\r\n              <Add />\r\n            </Fab>\r\n          </Grid>\r\n          <Grid item>\r\n            <TextField\r\n              label=\"Matches\"\r\n              type=\"text\"\r\n              onChange={handleChangeAddMatchesData}\r\n              value={matches}\r\n            />\r\n            <Fab\r\n              color=\"primary\"\r\n              aria-label=\"add\"\r\n              onClick={handleAddMatchesData}\r\n              disabled={false}\r\n            >\r\n              <Add />\r\n            </Fab>\r\n          </Grid>\r\n        </Grid>\r\n\r\n        <br />\r\n        <br /> \r\n        <br />\r\n        <br />\r\n\r\n        <Grid container>\r\n          <Grid item>\r\n            <Button\r\n              type=\"button\"\r\n              variant=\"contained\"\r\n              color=\"default\"\r\n              onClick={handleZeroingStakes}\r\n              startIcon={<Delete />}\r\n            >\r\n              {\" \"}\r\n              Обнулить ставки{\" \"}\r\n            </Button>\r\n          </Grid>\r\n          <Grid item>\r\n            <Button\r\n              type=\"button\"\r\n              variant=\"contained\"\r\n              color=\"default\"\r\n              onClick={handleZeroingMatches}\r\n              startIcon={<Delete />}\r\n            >\r\n              {\" \"}\r\n              Обнулить матчи{\" \"}\r\n            </Button>\r\n          </Grid>\r\n        </Grid>\r\n        <Grid container>\r\n          <Grid item>\r\n            {answer && (\r\n              <Alert severity=\"success\">\r\n                <AlertTitle> {answer.message}</AlertTitle>\r\n              </Alert>\r\n            )}\r\n          </Grid>\r\n        </Grid>\r\n      </Grid>\r\n    );\r\n  } else\r\n    return (\r\n      <div>\r\n        <h1>Access denied</h1>\r\n      </div>\r\n    );\r\n}\r\n\r\nexport { TestPage };\r\n","import React from \"react\";\r\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\r\n\r\nimport { PrivateRoute } from \"./PrivateRoute\";\r\nimport { HomePage } from \"./HomePage\";\r\nimport { LoginPage } from \"./LoginPage\";\r\nimport { AdminPage } from \"./AdminPage\";\r\nimport { InfoPage } from \"./InfoPage\";\r\nimport { ResultPage } from \"./ResultPage\";\r\nimport { TestPage } from \"./TestPage\";\r\n\r\nfunction App() {\r\n  return (\r\n    <div>\r\n      <Router>\r\n        <Switch>\r\n          <div>\r\n            <PrivateRoute exact path=\"/\" component={HomePage} />\r\n            <Route path=\"/login\" component={LoginPage} />\r\n            <PrivateRoute exact path=\"/admin\" component={AdminPage} />\r\n            <PrivateRoute exact path=\"/info\" component={InfoPage} />\r\n            <PrivateRoute exact path=\"/result\" component={ResultPage} />\r\n            <PrivateRoute exact path=\"/test\" component={TestPage} />\r\n          </div>\r\n        </Switch>\r\n      </Router>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}